<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>3 - Topology &amp; communities | yet another SNA coursebook</title>

    <meta name="author" content="Arthur Pecherskikh" />
  
   <meta name="description" content="This is a supporting page for the short course “Social Network Analysis” delivered to the HSE master students in 2025 (November-December)." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="3 - Topology &amp; communities | yet another SNA coursebook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a supporting page for the short course “Social Network Analysis” delivered to the HSE master students in 2025 (November-December)." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 - Topology &amp; communities | yet another SNA coursebook" />
  
  <meta name="twitter:description" content="This is a supporting page for the short course “Social Network Analysis” delivered to the HSE master students in 2025 (November-December)." />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.9.0/transition.js"></script>
    <script src="libs/bs3compat-0.9.0/tabs.js"></script>
    <script src="libs/bs3compat-0.9.0/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.10.4/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <script src="libs/d3-4.9.1/d3.min.js"></script>
    <script src="libs/forceNetwork-binding-0.4.1/forceNetwork.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">yet another SNA coursebook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="topology-communities" class="section level1 unnumbered">
<h1><strong>3 - Topology &amp; communities</strong></h1>
<p>The notes below accompany the third lecture of the course. It might be a good idea to consult the <a href="https://docs.google.com/presentation/d/1ff0JjV7v2tNI3oCqFgGmMtGzkmFk2cpGZumOudxm2MM/edit?usp=sharing">lecture slides</a> as well, as some technical details and examples are discussed there. During this session, we will:</p>
<ul>
<li><p>take a look at graph-level characheristics of the networks,</p></li>
<li><p>community detection algorithms,</p></li>
<li><p>and learn how to export network data to environments outside R and visualize it. The final section of this page contains notes on sources (we would cover <a href="https://gephi.org/">Gephi</a>, <a href="https://graphcommons.com/">GraphCommons</a>, and <a href="https://cosmograph.app/">Cosmograph</a>) and code to prepare your data for the export (mainly, column renaming).</p></li>
</ul>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="topology-communities.html#cb51-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)    </span>
<span id="cb51-2"><a href="topology-communities.html#cb51-2" tabindex="-1"></a><span class="fu">library</span>(igraph)       </span>
<span id="cb51-3"><a href="topology-communities.html#cb51-3" tabindex="-1"></a><span class="fu">library</span>(intergraph)   </span>
<span id="cb51-4"><a href="topology-communities.html#cb51-4" tabindex="-1"></a><span class="fu">library</span>(manynet)      </span>
<span id="cb51-5"><a href="topology-communities.html#cb51-5" tabindex="-1"></a><span class="fu">library</span>(netUtils)   <span class="do">## for core/periphery</span></span>
<span id="cb51-6"><a href="topology-communities.html#cb51-6" tabindex="-1"></a><span class="fu">library</span>(netseg)     <span class="do">## for homphily computation</span></span>
<span id="cb51-7"><a href="topology-communities.html#cb51-7" tabindex="-1"></a><span class="fu">library</span>(jsonlite)   <span class="do">## to read hson files</span></span>
<span id="cb51-8"><a href="topology-communities.html#cb51-8" tabindex="-1"></a></span>
<span id="cb51-9"><a href="topology-communities.html#cb51-9" tabindex="-1"></a><span class="co">#devtools::install_github(&quot;alextkalinka/linkcomm&quot;)</span></span>
<span id="cb51-10"><a href="topology-communities.html#cb51-10" tabindex="-1"></a><span class="fu">library</span>(linkcomm)   <span class="do">## overlapping communities</span></span>
<span id="cb51-11"><a href="topology-communities.html#cb51-11" tabindex="-1"></a></span>
<span id="cb51-12"><a href="topology-communities.html#cb51-12" tabindex="-1"></a><span class="co"># for `networkdata` package:</span></span>
<span id="cb51-13"><a href="topology-communities.html#cb51-13" tabindex="-1"></a><span class="co">#install.packages(&quot;remotes&quot;)</span></span>
<span id="cb51-14"><a href="topology-communities.html#cb51-14" tabindex="-1"></a><span class="co">#remotes::install_github(&quot;schochastics/networkdata&quot;)</span></span>
<span id="cb51-15"><a href="topology-communities.html#cb51-15" tabindex="-1"></a><span class="do">## exteremely large library! install if you have 5-7 minutes</span></span>
<span id="cb51-16"><a href="topology-communities.html#cb51-16" tabindex="-1"></a></span>
<span id="cb51-17"><a href="topology-communities.html#cb51-17" tabindex="-1"></a><span class="fu">library</span>(networkdata)  </span>
<span id="cb51-18"><a href="topology-communities.html#cb51-18" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      </span></code></pre></div>
<div id="graph-level-indicators" class="section level2 unnumbered">
<h2><strong>Graph-level indicators</strong></h2>
<p>For this time, we once again will analyze the lawfirm studied by Lazega (2001) available from <code>manynet</code> package. I stack to this example, because it is already familiar to you. Towards the end of this class, we will take a look at other networks.</p>
<blockquote>
<p>One-mode network dataset collected by Lazega (2001) on the relations between partners in a corporate law firm called SG&amp;R in New England 1988-1991. This particular subset includes the 36 partners among the 71 attorneys of this firm. Nodal attributes include seniority, formal status, office in which they work, gender, lawschool they attended, their age, and how many years they had been at the firm.</p>
</blockquote>
<p>As usual, we load data and split the network into 3 separate networks devoted to the special types of ties:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="topology-communities.html#cb52-1" tabindex="-1"></a>lawfirm <span class="ot">&lt;-</span> ison_lawfirm</span>
<span id="cb52-2"><a href="topology-communities.html#cb52-2" tabindex="-1"></a></span>
<span id="cb52-3"><a href="topology-communities.html#cb52-3" tabindex="-1"></a>nodelist <span class="ot">&lt;-</span> (lawfirm <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="topology-communities.html#cb52-4" tabindex="-1"></a>               <span class="fu">asDF</span>())<span class="sc">$</span>vertexes</span>
<span id="cb52-5"><a href="topology-communities.html#cb52-5" tabindex="-1"></a>edgelist <span class="ot">&lt;-</span> (lawfirm <span class="sc">%&gt;%</span></span>
<span id="cb52-6"><a href="topology-communities.html#cb52-6" tabindex="-1"></a>               <span class="fu">asDF</span>())<span class="sc">$</span>edge</span>
<span id="cb52-7"><a href="topology-communities.html#cb52-7" tabindex="-1"></a></span>
<span id="cb52-8"><a href="topology-communities.html#cb52-8" tabindex="-1"></a><span class="do">## advice network:</span></span>
<span id="cb52-9"><a href="topology-communities.html#cb52-9" tabindex="-1"></a>g.advice <span class="ot">&lt;-</span> edgelist <span class="sc">%&gt;%</span> </span>
<span id="cb52-10"><a href="topology-communities.html#cb52-10" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;advice&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-11"><a href="topology-communities.html#cb52-11" tabindex="-1"></a>  <span class="fu">graph_from_data_frame</span>(<span class="at">vertices =</span> nodelist,</span>
<span id="cb52-12"><a href="topology-communities.html#cb52-12" tabindex="-1"></a>                        <span class="at">directed =</span> T)</span>
<span id="cb52-13"><a href="topology-communities.html#cb52-13" tabindex="-1"></a></span>
<span id="cb52-14"><a href="topology-communities.html#cb52-14" tabindex="-1"></a><span class="do">## cowork network:</span></span>
<span id="cb52-15"><a href="topology-communities.html#cb52-15" tabindex="-1"></a>g.cowork <span class="ot">&lt;-</span> edgelist <span class="sc">%&gt;%</span> </span>
<span id="cb52-16"><a href="topology-communities.html#cb52-16" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;cowork&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-17"><a href="topology-communities.html#cb52-17" tabindex="-1"></a>  <span class="fu">graph_from_data_frame</span>(<span class="at">vertices =</span> nodelist,</span>
<span id="cb52-18"><a href="topology-communities.html#cb52-18" tabindex="-1"></a>                        <span class="at">directed =</span> T)</span>
<span id="cb52-19"><a href="topology-communities.html#cb52-19" tabindex="-1"></a></span>
<span id="cb52-20"><a href="topology-communities.html#cb52-20" tabindex="-1"></a><span class="do">## friendship network:</span></span>
<span id="cb52-21"><a href="topology-communities.html#cb52-21" tabindex="-1"></a>g.friends <span class="ot">&lt;-</span> edgelist <span class="sc">%&gt;%</span> </span>
<span id="cb52-22"><a href="topology-communities.html#cb52-22" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">&quot;friends&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-23"><a href="topology-communities.html#cb52-23" tabindex="-1"></a>  <span class="fu">graph_from_data_frame</span>(<span class="at">vertices =</span> nodelist,</span>
<span id="cb52-24"><a href="topology-communities.html#cb52-24" tabindex="-1"></a>                        <span class="at">directed =</span> T)</span></code></pre></div>
<p>First, we cover the basic measures to describe the networks.</p>
<p>To explain the diameter measure, I shortly return to <code>karateka</code> network from <code>manynet</code> package to highlight what the measures compute.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="topology-communities.html#cb53-1" tabindex="-1"></a>karate <span class="ot">&lt;-</span> ison_karateka</span></code></pre></div>
<p><strong>Diameter</strong> is the largest shortest path in the network, the approximate measure of the network’s size. It can be computed with:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="topology-communities.html#cb54-1" tabindex="-1"></a><span class="fu">get_diameter</span>(karate)</span>
<span id="cb54-2"><a href="topology-communities.html#cb54-2" tabindex="-1"></a><span class="co">#&gt; + 6/34 vertices, named, from 9e17774:</span></span>
<span id="cb54-3"><a href="topology-communities.html#cb54-3" tabindex="-1"></a><span class="co">#&gt; [1] 16     John A 20     Mr Hi  6      17</span></span></code></pre></div>
<p>Here is a (complicated to code) viz of this path:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="topology-communities.html#cb55-1" tabindex="-1"></a>karate.vertex <span class="ot">&lt;-</span> (karate <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="topology-communities.html#cb55-2" tabindex="-1"></a>  <span class="fu">asDF</span>())<span class="sc">$</span>vertex <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="topology-communities.html#cb55-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diameter =</span> <span class="fu">ifelse</span>(intergraph_id <span class="sc">%in%</span></span>
<span id="cb55-4"><a href="topology-communities.html#cb55-4" tabindex="-1"></a>                             <span class="fu">str_squish</span>(<span class="fu">get_diameter</span>(karate)),</span>
<span id="cb55-5"><a href="topology-communities.html#cb55-5" tabindex="-1"></a>                           <span class="dv">1</span>,</span>
<span id="cb55-6"><a href="topology-communities.html#cb55-6" tabindex="-1"></a>                           <span class="dv">0</span>))</span>
<span id="cb55-7"><a href="topology-communities.html#cb55-7" tabindex="-1"></a></span>
<span id="cb55-8"><a href="topology-communities.html#cb55-8" tabindex="-1"></a></span>
<span id="cb55-9"><a href="topology-communities.html#cb55-9" tabindex="-1"></a>karate.edge <span class="ot">&lt;-</span> (karate <span class="sc">%&gt;%</span> </span>
<span id="cb55-10"><a href="topology-communities.html#cb55-10" tabindex="-1"></a>  <span class="fu">asDF</span>())<span class="sc">$</span>edge</span>
<span id="cb55-11"><a href="topology-communities.html#cb55-11" tabindex="-1"></a></span>
<span id="cb55-12"><a href="topology-communities.html#cb55-12" tabindex="-1"></a>karate.edge <span class="ot">&lt;-</span> karate.edge <span class="sc">%&gt;%</span> </span>
<span id="cb55-13"><a href="topology-communities.html#cb55-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">edge_couple =</span> <span class="fu">str_c</span>(V1, <span class="st">&quot;-&quot;</span>, V2)) <span class="sc">%&gt;%</span> </span>
<span id="cb55-14"><a href="topology-communities.html#cb55-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diameter_edge =</span> <span class="fu">ifelse</span>(edge_couple <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;16-34&quot;</span>,</span>
<span id="cb55-15"><a href="topology-communities.html#cb55-15" tabindex="-1"></a>                                                   <span class="co">#&quot;34-20&quot;,</span></span>
<span id="cb55-16"><a href="topology-communities.html#cb55-16" tabindex="-1"></a>                                                   <span class="st">&quot;20-34&quot;</span>,</span>
<span id="cb55-17"><a href="topology-communities.html#cb55-17" tabindex="-1"></a>                                                   <span class="co">#&quot;20-1&quot;,</span></span>
<span id="cb55-18"><a href="topology-communities.html#cb55-18" tabindex="-1"></a>                                                   <span class="st">&quot;1-20&quot;</span>,</span>
<span id="cb55-19"><a href="topology-communities.html#cb55-19" tabindex="-1"></a>                                                   <span class="st">&quot;1-6&quot;</span>,</span>
<span id="cb55-20"><a href="topology-communities.html#cb55-20" tabindex="-1"></a>                                                   <span class="st">&quot;6-17&quot;</span>),</span>
<span id="cb55-21"><a href="topology-communities.html#cb55-21" tabindex="-1"></a>                                <span class="st">&quot;1&quot;</span>,</span>
<span id="cb55-22"><a href="topology-communities.html#cb55-22" tabindex="-1"></a>                                <span class="st">&quot;0&quot;</span>))</span>
<span id="cb55-23"><a href="topology-communities.html#cb55-23" tabindex="-1"></a></span>
<span id="cb55-24"><a href="topology-communities.html#cb55-24" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">34</span>)</span>
<span id="cb55-25"><a href="topology-communities.html#cb55-25" tabindex="-1"></a>karate.edge <span class="sc">%&gt;%</span> </span>
<span id="cb55-26"><a href="topology-communities.html#cb55-26" tabindex="-1"></a>  <span class="fu">graph_from_data_frame</span>(<span class="at">directed =</span> F,</span>
<span id="cb55-27"><a href="topology-communities.html#cb55-27" tabindex="-1"></a>                        <span class="at">vertices =</span> karate.vertex) <span class="sc">%&gt;%</span> </span>
<span id="cb55-28"><a href="topology-communities.html#cb55-28" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb55-29"><a href="topology-communities.html#cb55-29" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="fu">ifelse</span>(<span class="fu">V</span>(.)<span class="sc">$</span>diameter <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb55-30"><a href="topology-communities.html#cb55-30" tabindex="-1"></a>                             <span class="st">&quot;coral1&quot;</span>,</span>
<span id="cb55-31"><a href="topology-communities.html#cb55-31" tabindex="-1"></a>                             <span class="st">&quot;black&quot;</span>),</span>
<span id="cb55-32"><a href="topology-communities.html#cb55-32" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="fu">ifelse</span>(<span class="fu">V</span>(.)<span class="sc">$</span>diameter <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb55-33"><a href="topology-communities.html#cb55-33" tabindex="-1"></a>                             <span class="dv">20</span>,</span>
<span id="cb55-34"><a href="topology-communities.html#cb55-34" tabindex="-1"></a>                             <span class="dv">15</span>),</span>
<span id="cb55-35"><a href="topology-communities.html#cb55-35" tabindex="-1"></a>       <span class="at">edge.width =</span> <span class="fu">ifelse</span>(<span class="fu">E</span>(.)<span class="sc">$</span>diameter_edge <span class="sc">==</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb55-36"><a href="topology-communities.html#cb55-36" tabindex="-1"></a>                             <span class="dv">5</span>,</span>
<span id="cb55-37"><a href="topology-communities.html#cb55-37" tabindex="-1"></a>                             <span class="dv">1</span>),</span>
<span id="cb55-38"><a href="topology-communities.html#cb55-38" tabindex="-1"></a>       <span class="at">edge.color =</span> <span class="fu">ifelse</span>(<span class="fu">E</span>(.)<span class="sc">$</span>diameter_edge <span class="sc">==</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb55-39"><a href="topology-communities.html#cb55-39" tabindex="-1"></a>                             <span class="st">&quot;coral1&quot;</span>,</span>
<span id="cb55-40"><a href="topology-communities.html#cb55-40" tabindex="-1"></a>                             <span class="st">&quot;black&quot;</span>))</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="topology-communities.html#cb56-1" tabindex="-1"></a></span>
<span id="cb56-2"><a href="topology-communities.html#cb56-2" tabindex="-1"></a></span>
<span id="cb56-3"><a href="topology-communities.html#cb56-3" tabindex="-1"></a><span class="fu">rm</span>(karate1, karate.edge, karate.vertex, karate)</span>
<span id="cb56-4"><a href="topology-communities.html#cb56-4" tabindex="-1"></a><span class="co">#&gt; Warning in rm(karate1, karate.edge, karate.vertex, karate):</span></span>
<span id="cb56-5"><a href="topology-communities.html#cb56-5" tabindex="-1"></a><span class="co">#&gt; объект &#39;karate1&#39; не найден</span></span></code></pre></div>
<p>And here is a summary table for the types of networks from the <code>lawfirm</code> network. Note the difference between the “cowork” and “friends” networks: the former has a shorter diameter, meaning (1) it is easier for ideas to travel there, (2) this network has more edges in general, so we should interpret the results carefully.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="topology-communities.html#cb57-1" tabindex="-1"></a>networks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;advice&quot;</span>,</span>
<span id="cb57-2"><a href="topology-communities.html#cb57-2" tabindex="-1"></a>              <span class="st">&quot;friends&quot;</span>,</span>
<span id="cb57-3"><a href="topology-communities.html#cb57-3" tabindex="-1"></a>              <span class="st">&quot;cowork&quot;</span>)</span>
<span id="cb57-4"><a href="topology-communities.html#cb57-4" tabindex="-1"></a></span>
<span id="cb57-5"><a href="topology-communities.html#cb57-5" tabindex="-1"></a>diameters <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">get_diameter</span>(g.advice) <span class="sc">%&gt;%</span> <span class="fu">length</span>(),</span>
<span id="cb57-6"><a href="topology-communities.html#cb57-6" tabindex="-1"></a>               <span class="fu">get_diameter</span>(g.friends) <span class="sc">%&gt;%</span> <span class="fu">length</span>(),</span>
<span id="cb57-7"><a href="topology-communities.html#cb57-7" tabindex="-1"></a>               <span class="fu">get_diameter</span>(g.cowork) <span class="sc">%&gt;%</span> <span class="fu">length</span>())</span>
<span id="cb57-8"><a href="topology-communities.html#cb57-8" tabindex="-1"></a></span>
<span id="cb57-9"><a href="topology-communities.html#cb57-9" tabindex="-1"></a>n_edges <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">E</span>(g.advice) <span class="sc">%&gt;%</span></span>
<span id="cb57-10"><a href="topology-communities.html#cb57-10" tabindex="-1"></a>               <span class="fu">length</span>(),</span>
<span id="cb57-11"><a href="topology-communities.html#cb57-11" tabindex="-1"></a>             <span class="fu">E</span>(g.friends) <span class="sc">%&gt;%</span></span>
<span id="cb57-12"><a href="topology-communities.html#cb57-12" tabindex="-1"></a>               <span class="fu">length</span>(),</span>
<span id="cb57-13"><a href="topology-communities.html#cb57-13" tabindex="-1"></a>             <span class="fu">E</span>(g.cowork) <span class="sc">%&gt;%</span></span>
<span id="cb57-14"><a href="topology-communities.html#cb57-14" tabindex="-1"></a>               <span class="fu">length</span>())</span>
<span id="cb57-15"><a href="topology-communities.html#cb57-15" tabindex="-1"></a></span>
<span id="cb57-16"><a href="topology-communities.html#cb57-16" tabindex="-1"></a>n_vertices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">V</span>(g.advice) <span class="sc">%&gt;%</span></span>
<span id="cb57-17"><a href="topology-communities.html#cb57-17" tabindex="-1"></a>                  <span class="fu">length</span>(),</span>
<span id="cb57-18"><a href="topology-communities.html#cb57-18" tabindex="-1"></a>                <span class="fu">V</span>(g.friends) <span class="sc">%&gt;%</span></span>
<span id="cb57-19"><a href="topology-communities.html#cb57-19" tabindex="-1"></a>                  <span class="fu">length</span>(),</span>
<span id="cb57-20"><a href="topology-communities.html#cb57-20" tabindex="-1"></a>                <span class="fu">V</span>(g.cowork) <span class="sc">%&gt;%</span></span>
<span id="cb57-21"><a href="topology-communities.html#cb57-21" tabindex="-1"></a>                  <span class="fu">length</span>())</span>
<span id="cb57-22"><a href="topology-communities.html#cb57-22" tabindex="-1"></a></span>
<span id="cb57-23"><a href="topology-communities.html#cb57-23" tabindex="-1"></a><span class="co">#components(g.cowork) - run on different networks</span></span>
<span id="cb57-24"><a href="topology-communities.html#cb57-24" tabindex="-1"></a></span>
<span id="cb57-25"><a href="topology-communities.html#cb57-25" tabindex="-1"></a><span class="fu">data.frame</span>(networks, n_edges, n_vertices, diameters)</span>
<span id="cb57-26"><a href="topology-communities.html#cb57-26" tabindex="-1"></a><span class="co">#&gt;   networks n_edges n_vertices diameters</span></span>
<span id="cb57-27"><a href="topology-communities.html#cb57-27" tabindex="-1"></a><span class="co">#&gt; 1   advice     892         71         7</span></span>
<span id="cb57-28"><a href="topology-communities.html#cb57-28" tabindex="-1"></a><span class="co">#&gt; 2  friends     575         71         8</span></span>
<span id="cb57-29"><a href="topology-communities.html#cb57-29" tabindex="-1"></a><span class="co">#&gt; 3   cowork    1104         71         5</span></span></code></pre></div>
<p>Next, let’s discuss centralization and density.</p>
<p><strong>Centralization</strong> - the measure of concentration of the network around the nodes with high values of degree centality.</p>
<p><strong>Density</strong> - number ob observed ties / number of possible ties. You can interpret it directly, as the measure of number of relations present in the network. Note the maths here: The maximum number of possible edges in a graph can be calculated using the formula <span class="math inline">\(E_{max} = \frac{n(n-1)}{2}\)</span>, where <span class="math inline">\(n\)</span> represents the number of nodes in the network.</p>
<p>The table below shows these values for our networks:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="topology-communities.html#cb58-1" tabindex="-1"></a>centralization_scores <span class="ot">&lt;-</span> <span class="fu">c</span>((<span class="fu">centr_degree</span>(g.advice, <span class="at">loops=</span>F))<span class="sc">$</span>centralization,</span>
<span id="cb58-2"><a href="topology-communities.html#cb58-2" tabindex="-1"></a>                     (<span class="fu">centr_degree</span>(g.friends, <span class="at">loops=</span>F))<span class="sc">$</span>centralization,</span>
<span id="cb58-3"><a href="topology-communities.html#cb58-3" tabindex="-1"></a>                     (<span class="fu">centr_degree</span>(g.cowork, <span class="at">loops=</span>F))<span class="sc">$</span>centralization)</span>
<span id="cb58-4"><a href="topology-communities.html#cb58-4" tabindex="-1"></a></span>
<span id="cb58-5"><a href="topology-communities.html#cb58-5" tabindex="-1"></a>density_scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">edge_density</span>(g.advice),</span>
<span id="cb58-6"><a href="topology-communities.html#cb58-6" tabindex="-1"></a>                    <span class="fu">edge_density</span>(g.friends),</span>
<span id="cb58-7"><a href="topology-communities.html#cb58-7" tabindex="-1"></a>                    <span class="fu">edge_density</span>(g.cowork)) <span class="do">## !! note that we cannot compare networks of different size</span></span>
<span id="cb58-8"><a href="topology-communities.html#cb58-8" tabindex="-1"></a></span>
<span id="cb58-9"><a href="topology-communities.html#cb58-9" tabindex="-1"></a><span class="fu">data.frame</span>(networks,</span>
<span id="cb58-10"><a href="topology-communities.html#cb58-10" tabindex="-1"></a>           <span class="at">centralization =</span> <span class="fu">round</span>(centralization_scores,<span class="dv">2</span>),</span>
<span id="cb58-11"><a href="topology-communities.html#cb58-11" tabindex="-1"></a>           <span class="at">density =</span> <span class="fu">round</span>(density_scores, <span class="dv">2</span>))</span>
<span id="cb58-12"><a href="topology-communities.html#cb58-12" tabindex="-1"></a><span class="co">#&gt;   networks centralization density</span></span>
<span id="cb58-13"><a href="topology-communities.html#cb58-13" tabindex="-1"></a><span class="co">#&gt; 1   advice           0.26    0.18</span></span>
<span id="cb58-14"><a href="topology-communities.html#cb58-14" tabindex="-1"></a><span class="co">#&gt; 2  friends           0.18    0.12</span></span>
<span id="cb58-15"><a href="topology-communities.html#cb58-15" tabindex="-1"></a><span class="co">#&gt; 3   cowork           0.29    0.22</span></span></code></pre></div>
<p>Next,</p>
<p><strong>Reciprocity</strong> - (for directed graphs only) the share of relations which are reciprocal, i.e. directed for both nodes involved.</p>
<p><strong>Transitivity</strong> - the density of loops of length three (triangles) in a network, or, in other words, a measure of the nodes’ tendency to cluster together.</p>
<p><strong>Homophily</strong> - tendency of the nodes to form ties with similar nodes (similar gender, age, etc.)</p>
<p>Let’s compute these measures for all of our networks (friendship, coworking, advice). For honophily, we check whether nodes tend to be tied to each other based on “gender” or “practice” attributes:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="topology-communities.html#cb59-1" tabindex="-1"></a>reciprocity_scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">reciprocity</span>(g.advice, <span class="at">mode =</span> <span class="st">&quot;ratio&quot;</span>),</span>
<span id="cb59-2"><a href="topology-communities.html#cb59-2" tabindex="-1"></a>                        <span class="fu">reciprocity</span>(g.friends, <span class="at">mode =</span> <span class="st">&quot;ratio&quot;</span>),</span>
<span id="cb59-3"><a href="topology-communities.html#cb59-3" tabindex="-1"></a>                        <span class="fu">reciprocity</span>(g.cowork, <span class="at">mode =</span> <span class="st">&quot;ratio&quot;</span>))  <span class="co"># set mode = ratio, it is not by deafult </span></span>
<span id="cb59-4"><a href="topology-communities.html#cb59-4" tabindex="-1"></a></span>
<span id="cb59-5"><a href="topology-communities.html#cb59-5" tabindex="-1"></a></span>
<span id="cb59-6"><a href="topology-communities.html#cb59-6" tabindex="-1"></a>transitivity_scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">transitivity</span>(g.advice, <span class="at">type =</span> <span class="st">&quot;global&quot;</span>),</span>
<span id="cb59-7"><a href="topology-communities.html#cb59-7" tabindex="-1"></a>                         <span class="fu">transitivity</span>(g.friends, <span class="at">type =</span> <span class="st">&quot;global&quot;</span>),</span>
<span id="cb59-8"><a href="topology-communities.html#cb59-8" tabindex="-1"></a>                         <span class="fu">transitivity</span>(g.cowork, <span class="at">type =</span> <span class="st">&quot;global&quot;</span>)) <span class="do">## explore local by yourself</span></span>
<span id="cb59-9"><a href="topology-communities.html#cb59-9" tabindex="-1"></a></span>
<span id="cb59-10"><a href="topology-communities.html#cb59-10" tabindex="-1"></a>homophily_scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">orwg</span>(g.advice <span class="sc">%&gt;%</span></span>
<span id="cb59-11"><a href="topology-communities.html#cb59-11" tabindex="-1"></a>                             <span class="fu">simplify</span>(), <span class="st">&quot;gender&quot;</span>),</span>
<span id="cb59-12"><a href="topology-communities.html#cb59-12" tabindex="-1"></a>                      <span class="fu">orwg</span>(g.friends <span class="sc">%&gt;%</span></span>
<span id="cb59-13"><a href="topology-communities.html#cb59-13" tabindex="-1"></a>                             <span class="fu">simplify</span>(), <span class="st">&quot;gender&quot;</span>),</span>
<span id="cb59-14"><a href="topology-communities.html#cb59-14" tabindex="-1"></a>                      <span class="fu">orwg</span>(g.cowork <span class="sc">%&gt;%</span></span>
<span id="cb59-15"><a href="topology-communities.html#cb59-15" tabindex="-1"></a>                             <span class="fu">simplify</span>(), <span class="st">&quot;gender&quot;</span>))</span>
<span id="cb59-16"><a href="topology-communities.html#cb59-16" tabindex="-1"></a></span>
<span id="cb59-17"><a href="topology-communities.html#cb59-17" tabindex="-1"></a>homophily_scores.practice <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">orwg</span>(g.advice <span class="sc">%&gt;%</span></span>
<span id="cb59-18"><a href="topology-communities.html#cb59-18" tabindex="-1"></a>                                      <span class="fu">simplify</span>(), <span class="st">&quot;practice&quot;</span>),</span>
<span id="cb59-19"><a href="topology-communities.html#cb59-19" tabindex="-1"></a>                               <span class="fu">orwg</span>(g.friends <span class="sc">%&gt;%</span></span>
<span id="cb59-20"><a href="topology-communities.html#cb59-20" tabindex="-1"></a>                                      <span class="fu">simplify</span>(), <span class="st">&quot;practice&quot;</span>),</span>
<span id="cb59-21"><a href="topology-communities.html#cb59-21" tabindex="-1"></a>                               <span class="fu">orwg</span>(g.cowork <span class="sc">%&gt;%</span></span>
<span id="cb59-22"><a href="topology-communities.html#cb59-22" tabindex="-1"></a>                                      <span class="fu">simplify</span>(), <span class="st">&quot;practice&quot;</span>))</span>
<span id="cb59-23"><a href="topology-communities.html#cb59-23" tabindex="-1"></a></span>
<span id="cb59-24"><a href="topology-communities.html#cb59-24" tabindex="-1"></a><span class="co">#orwg(g.advice %&gt;%</span></span>
<span id="cb59-25"><a href="topology-communities.html#cb59-25" tabindex="-1"></a><span class="co">#       simplify(), &quot;practice&quot;) ## interpret like odds ratio, “Odds ratio for connected, as opposed to disconnected, dyads depending whether it is between- or within-group, i.e. how much more likely the dyad will be connected if it is within-group.”</span></span>
<span id="cb59-26"><a href="topology-communities.html#cb59-26" tabindex="-1"></a></span>
<span id="cb59-27"><a href="topology-communities.html#cb59-27" tabindex="-1"></a></span>
<span id="cb59-28"><a href="topology-communities.html#cb59-28" tabindex="-1"></a><span class="fu">data.frame</span>(networks,</span>
<span id="cb59-29"><a href="topology-communities.html#cb59-29" tabindex="-1"></a>           <span class="at">gender.homophily =</span> <span class="fu">round</span>(homophily_scores,<span class="dv">2</span>),</span>
<span id="cb59-30"><a href="topology-communities.html#cb59-30" tabindex="-1"></a>           <span class="at">practice.homophily =</span> <span class="fu">round</span>(homophily_scores.practice, <span class="dv">2</span>),</span>
<span id="cb59-31"><a href="topology-communities.html#cb59-31" tabindex="-1"></a>           <span class="at">reciprocity =</span> <span class="fu">round</span>(reciprocity_scores, <span class="dv">2</span>),</span>
<span id="cb59-32"><a href="topology-communities.html#cb59-32" tabindex="-1"></a>           <span class="at">transitivity =</span> <span class="fu">round</span>(transitivity_scores,<span class="dv">2</span>))</span>
<span id="cb59-33"><a href="topology-communities.html#cb59-33" tabindex="-1"></a><span class="co">#&gt;   networks gender.homophily practice.homophily reciprocity</span></span>
<span id="cb59-34"><a href="topology-communities.html#cb59-34" tabindex="-1"></a><span class="co">#&gt; 1   advice             1.60               3.45        0.24</span></span>
<span id="cb59-35"><a href="topology-communities.html#cb59-35" tabindex="-1"></a><span class="co">#&gt; 2  friends             1.62               1.62        0.44</span></span>
<span id="cb59-36"><a href="topology-communities.html#cb59-36" tabindex="-1"></a><span class="co">#&gt; 3   cowork             1.33               4.01        0.52</span></span>
<span id="cb59-37"><a href="topology-communities.html#cb59-37" tabindex="-1"></a><span class="co">#&gt;   transitivity</span></span>
<span id="cb59-38"><a href="topology-communities.html#cb59-38" tabindex="-1"></a><span class="co">#&gt; 1         0.48</span></span>
<span id="cb59-39"><a href="topology-communities.html#cb59-39" tabindex="-1"></a><span class="co">#&gt; 2         0.45</span></span>
<span id="cb59-40"><a href="topology-communities.html#cb59-40" tabindex="-1"></a><span class="co">#&gt; 3         0.45</span></span></code></pre></div>
<p>Homophily computed in this way requires you to interpret the values like odds ratio, i.e. the chances of establishing a homophilic connection rather than heterophilic one. The function <code>orwg()</code> comes from the “netseg” package.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="topology-communities.html#cb60-1" tabindex="-1"></a><span class="fu">orwg</span>(g.advice <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="topology-communities.html#cb60-2" tabindex="-1"></a>       <span class="fu">simplify</span>(), <span class="st">&quot;office&quot;</span>)</span>
<span id="cb60-3"><a href="topology-communities.html#cb60-3" tabindex="-1"></a><span class="co">#&gt; [1] 4.138307</span></span></code></pre></div>
<p>The core/periphery membership can be estimated as follows (we rely on <code>core_periphery()</code> function from the “netUtils” package):</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="topology-communities.html#cb61-1" tabindex="-1"></a><span class="fu">core_periphery</span>(g.advice)</span>
<span id="cb61-2"><a href="topology-communities.html#cb61-2" tabindex="-1"></a><span class="co">#&gt; $vec</span></span>
<span id="cb61-3"><a href="topology-communities.html#cb61-3" tabindex="-1"></a><span class="co">#&gt;  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 </span></span>
<span id="cb61-4"><a href="topology-communities.html#cb61-4" tabindex="-1"></a><span class="co">#&gt;  0  1  0  1  0  0  0  0  0  0  0  1  1  1  1  1  1  0  1  1 </span></span>
<span id="cb61-5"><a href="topology-communities.html#cb61-5" tabindex="-1"></a><span class="co">#&gt; 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 </span></span>
<span id="cb61-6"><a href="topology-communities.html#cb61-6" tabindex="-1"></a><span class="co">#&gt;  1  1  0  1  0  1  1  1  1  1  1  1  0  1  1  0  0  0  1  1 </span></span>
<span id="cb61-7"><a href="topology-communities.html#cb61-7" tabindex="-1"></a><span class="co">#&gt; 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 </span></span>
<span id="cb61-8"><a href="topology-communities.html#cb61-8" tabindex="-1"></a><span class="co">#&gt;  1  1  0  0  0  0  0  0  0  0  0  0  0  0  1  1  0  0  0  0 </span></span>
<span id="cb61-9"><a href="topology-communities.html#cb61-9" tabindex="-1"></a><span class="co">#&gt; 61 62 63 64 65 66 67 68 69 70 71 </span></span>
<span id="cb61-10"><a href="topology-communities.html#cb61-10" tabindex="-1"></a><span class="co">#&gt;  0  0  0  0  1  0  0  0  0  0  0 </span></span>
<span id="cb61-11"><a href="topology-communities.html#cb61-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb61-12"><a href="topology-communities.html#cb61-12" tabindex="-1"></a><span class="co">#&gt; $corr</span></span>
<span id="cb61-13"><a href="topology-communities.html#cb61-13" tabindex="-1"></a><span class="co">#&gt; [1] 0.3686634</span></span>
<span id="cb61-14"><a href="topology-communities.html#cb61-14" tabindex="-1"></a><span class="co">#?core_periphery</span></span></code></pre></div>
<p>Be mindful when using core/periphery detection: many graphs do not exhibit this structure at all. Here is the viz with the solution from above (we need to first assign the computed partition to the nodes):</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="topology-communities.html#cb62-1" tabindex="-1"></a><span class="fu">V</span>(g.advice)<span class="sc">$</span>core <span class="ot">=</span> <span class="fu">core_periphery</span>(g.advice)<span class="sc">$</span>vec</span>
<span id="cb62-2"><a href="topology-communities.html#cb62-2" tabindex="-1"></a><span class="fu">V</span>(g.advice)<span class="sc">$</span>indegree <span class="ot">=</span> <span class="fu">degree</span>(g.advice, <span class="at">mode =</span> <span class="st">&quot;in&quot;</span>)</span>
<span id="cb62-3"><a href="topology-communities.html#cb62-3" tabindex="-1"></a></span>
<span id="cb62-4"><a href="topology-communities.html#cb62-4" tabindex="-1"></a>g.advice <span class="sc">%&gt;%</span> </span>
<span id="cb62-5"><a href="topology-communities.html#cb62-5" tabindex="-1"></a>  <span class="fu">as_undirected</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-6"><a href="topology-communities.html#cb62-6" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb62-7"><a href="topology-communities.html#cb62-7" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="fu">V</span>(g.advice)<span class="sc">$</span>indegree<span class="sc">/</span><span class="fl">1.5</span>,</span>
<span id="cb62-8"><a href="topology-communities.html#cb62-8" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="fu">ifelse</span>(<span class="fu">V</span>(g.advice)<span class="sc">$</span>core <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb62-9"><a href="topology-communities.html#cb62-9" tabindex="-1"></a>                             <span class="st">&quot;coral1&quot;</span>,</span>
<span id="cb62-10"><a href="topology-communities.html#cb62-10" tabindex="-1"></a>                             <span class="st">&quot;lightblue&quot;</span>))</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="community-detection-algorithms" class="section level2 unnumbered">
<h2><strong>Community detection algorithms</strong></h2>
<p>Finally, here is a possible solution to community detection task. Note that it works for undirected graphs, so we need to convert it to undirected mode first like this:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="topology-communities.html#cb63-1" tabindex="-1"></a>g.friends <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="topology-communities.html#cb63-2" tabindex="-1"></a>  <span class="fu">as_undirected</span>()</span>
<span id="cb63-3"><a href="topology-communities.html#cb63-3" tabindex="-1"></a><span class="co">#&gt; IGRAPH b0e6738 UN-- 71 399 -- </span></span>
<span id="cb63-4"><a href="topology-communities.html#cb63-4" tabindex="-1"></a><span class="co">#&gt; + attr: name (v/c), status (v/c), gender (v/c),</span></span>
<span id="cb63-5"><a href="topology-communities.html#cb63-5" tabindex="-1"></a><span class="co">#&gt; | office (v/c), seniority (v/n), age (v/n), practice</span></span>
<span id="cb63-6"><a href="topology-communities.html#cb63-6" tabindex="-1"></a><span class="co">#&gt; | (v/c), school (v/c)</span></span>
<span id="cb63-7"><a href="topology-communities.html#cb63-7" tabindex="-1"></a><span class="co">#&gt; + edges from b0e6738 (vertex names):</span></span>
<span id="cb63-8"><a href="topology-communities.html#cb63-8" tabindex="-1"></a><span class="co">#&gt;  [1] 1 --2  1 --4  2 --4  3 --4  3 --7  5 --7  1 --8  4 --9 </span></span>
<span id="cb63-9"><a href="topology-communities.html#cb63-9" tabindex="-1"></a><span class="co">#&gt;  [9] 2 --10 8 --10 9 --10 4 --11 8 --11 9 --11 10--11 1 --12</span></span>
<span id="cb63-10"><a href="topology-communities.html#cb63-10" tabindex="-1"></a><span class="co">#&gt; [17] 2 --12 4 --12 5 --12 8 --12 9 --12 10--12 11--12 4 --13</span></span>
<span id="cb63-11"><a href="topology-communities.html#cb63-11" tabindex="-1"></a><span class="co">#&gt; [25] 9 --13 10--13 11--13 12--13 3 --14 4 --14 6 --14 12--15</span></span>
<span id="cb63-12"><a href="topology-communities.html#cb63-12" tabindex="-1"></a><span class="co">#&gt; [33] 13--15 2 --16 4 --16 12--16 13--16 14--16 15--16 1 --17</span></span>
<span id="cb63-13"><a href="topology-communities.html#cb63-13" tabindex="-1"></a><span class="co">#&gt; [41] 2 --17 4 --17 8 --17 9 --17 10--17 11--17 12--17 13--17</span></span>
<span id="cb63-14"><a href="topology-communities.html#cb63-14" tabindex="-1"></a><span class="co">#&gt; + ... omitted several edges</span></span></code></pre></div>
<p>… and here is the community detection function, reproducing the Louvain algorithm (see the <a href="https://docs.google.com/presentation/d/1ff0JjV7v2tNI3oCqFgGmMtGzkmFk2cpGZumOudxm2MM/edit?usp=sharing">lecture slides</a> for details):</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="topology-communities.html#cb64-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">22</span>) <span class="do">## to reproduce</span></span>
<span id="cb64-2"><a href="topology-communities.html#cb64-2" tabindex="-1"></a>lc <span class="ot">&lt;-</span> <span class="fu">cluster_louvain</span>(g.friends <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="topology-communities.html#cb64-3" tabindex="-1"></a>                        <span class="fu">as_undirected</span>()) <span class="do">## !!</span></span>
<span id="cb64-4"><a href="topology-communities.html#cb64-4" tabindex="-1"></a></span>
<span id="cb64-5"><a href="topology-communities.html#cb64-5" tabindex="-1"></a><span class="fu">V</span>(g.friends)<span class="sc">$</span>clusters <span class="ot">=</span> <span class="fu">membership</span>(lc)</span>
<span id="cb64-6"><a href="topology-communities.html#cb64-6" tabindex="-1"></a></span>
<span id="cb64-7"><a href="topology-communities.html#cb64-7" tabindex="-1"></a>g.friends <span class="sc">%&gt;%</span> </span>
<span id="cb64-8"><a href="topology-communities.html#cb64-8" tabindex="-1"></a>  <span class="fu">as_undirected</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb64-9"><a href="topology-communities.html#cb64-9" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb64-10"><a href="topology-communities.html#cb64-10" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">10</span>,</span>
<span id="cb64-11"><a href="topology-communities.html#cb64-11" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="fu">as.character</span>(<span class="fu">V</span>(g.friends)<span class="sc">$</span>clusters))</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Another important note is that you can use different resolution parameters. Indirectly, it changes the number of communities detected. When applying the algorithm to your data, please, check the whole range of “resolution” values to see how robust your solutions are.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="topology-communities.html#cb65-1" tabindex="-1"></a>cl0<span class="fl">.75</span> <span class="ot">&lt;-</span> <span class="fu">cluster_louvain</span>(g.friends <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="topology-communities.html#cb65-2" tabindex="-1"></a>                            <span class="fu">as_undirected</span>(),</span>
<span id="cb65-3"><a href="topology-communities.html#cb65-3" tabindex="-1"></a>                       <span class="at">resolution =</span> <span class="fl">0.75</span>)</span>
<span id="cb65-4"><a href="topology-communities.html#cb65-4" tabindex="-1"></a></span>
<span id="cb65-5"><a href="topology-communities.html#cb65-5" tabindex="-1"></a>cl1<span class="fl">.75</span> <span class="ot">&lt;-</span> <span class="fu">cluster_louvain</span>(g.friends <span class="sc">%&gt;%</span></span>
<span id="cb65-6"><a href="topology-communities.html#cb65-6" tabindex="-1"></a>                            <span class="fu">as_undirected</span>(),</span>
<span id="cb65-7"><a href="topology-communities.html#cb65-7" tabindex="-1"></a>                          <span class="at">resolution =</span> <span class="fl">1.75</span>)</span>
<span id="cb65-8"><a href="topology-communities.html#cb65-8" tabindex="-1"></a></span>
<span id="cb65-9"><a href="topology-communities.html#cb65-9" tabindex="-1"></a><span class="fu">V</span>(g.friends)<span class="sc">$</span>cl0<span class="fl">.75</span> <span class="ot">=</span> <span class="fu">membership</span>(cl0<span class="fl">.75</span>)</span>
<span id="cb65-10"><a href="topology-communities.html#cb65-10" tabindex="-1"></a><span class="fu">V</span>(g.friends)<span class="sc">$</span>cl1<span class="fl">.75</span> <span class="ot">=</span> <span class="fu">membership</span>(cl1<span class="fl">.75</span>)</span>
<span id="cb65-11"><a href="topology-communities.html#cb65-11" tabindex="-1"></a></span>
<span id="cb65-12"><a href="topology-communities.html#cb65-12" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb65-13"><a href="topology-communities.html#cb65-13" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb65-14"><a href="topology-communities.html#cb65-14" tabindex="-1"></a>g.friends <span class="sc">%&gt;%</span> </span>
<span id="cb65-15"><a href="topology-communities.html#cb65-15" tabindex="-1"></a>  <span class="fu">as_undirected</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-16"><a href="topology-communities.html#cb65-16" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb65-17"><a href="topology-communities.html#cb65-17" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">10</span>,</span>
<span id="cb65-18"><a href="topology-communities.html#cb65-18" tabindex="-1"></a>       <span class="at">main =</span> <span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">resolution = 1.75&quot;</span>,</span>
<span id="cb65-19"><a href="topology-communities.html#cb65-19" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="fu">as.character</span>(<span class="fu">V</span>(g.friends)<span class="sc">$</span>cl1<span class="fl">.75</span>))</span>
<span id="cb65-20"><a href="topology-communities.html#cb65-20" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb65-21"><a href="topology-communities.html#cb65-21" tabindex="-1"></a>g.friends <span class="sc">%&gt;%</span> </span>
<span id="cb65-22"><a href="topology-communities.html#cb65-22" tabindex="-1"></a>  <span class="fu">as_undirected</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-23"><a href="topology-communities.html#cb65-23" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb65-24"><a href="topology-communities.html#cb65-24" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">10</span>,</span>
<span id="cb65-25"><a href="topology-communities.html#cb65-25" tabindex="-1"></a>       <span class="at">main =</span> <span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">resolution = 0.75&quot;</span>,</span>
<span id="cb65-26"><a href="topology-communities.html#cb65-26" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="fu">as.character</span>(<span class="fu">V</span>(g.friends)<span class="sc">$</span>cl0<span class="fl">.75</span>))</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Also, we can search for overlapping communities. I decided not to cover this topic in depth, so, if you are interested, check the <a href="https://alextkalinka.github.io/linkcomm/">“linkcomm” package documentation</a>:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="topology-communities.html#cb66-1" tabindex="-1"></a>lc <span class="ot">&lt;-</span> <span class="fu">getLinkCommunities</span>((<span class="fu">asDF</span>(g.friends))<span class="sc">$</span>edge[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>],</span>
<span id="cb66-2"><a href="topology-communities.html#cb66-2" tabindex="-1"></a>                         <span class="at">hcmethod =</span> <span class="st">&quot;single&quot;</span>,</span>
<span id="cb66-3"><a href="topology-communities.html#cb66-3" tabindex="-1"></a>                         <span class="at">plot =</span> <span class="cn">TRUE</span>, <span class="co">#...or false</span></span>
<span id="cb66-4"><a href="topology-communities.html#cb66-4" tabindex="-1"></a>                         <span class="at">verbose =</span> F)</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="topology-communities.html#cb67-1" tabindex="-1"></a></span>
<span id="cb67-2"><a href="topology-communities.html#cb67-2" tabindex="-1"></a><span class="fu">plotLinkCommGraph</span>(lc,</span>
<span id="cb67-3"><a href="topology-communities.html#cb67-3" tabindex="-1"></a>                  <span class="at">verbose =</span> <span class="cn">FALSE</span>,</span>
<span id="cb67-4"><a href="topology-communities.html#cb67-4" tabindex="-1"></a>                  <span class="at">vlabel =</span> F)</span>
<span id="cb67-5"><a href="topology-communities.html#cb67-5" tabindex="-1"></a><span class="co">#&gt;    Getting node community edge density...1%</span></span>
<span id="cb67-6"><a href="topology-communities.html#cb67-6" tabindex="-1"></a>   Getting node community edge density...<span class="dv">3</span>%</span>
<span id="cb67-7"><a href="topology-communities.html#cb67-7" tabindex="-1"></a>   Getting node community edge density...<span class="dv">5</span>%</span>
<span id="cb67-8"><a href="topology-communities.html#cb67-8" tabindex="-1"></a>   Getting node community edge density...<span class="dv">7</span>%</span>
<span id="cb67-9"><a href="topology-communities.html#cb67-9" tabindex="-1"></a>   Getting node community edge density...<span class="dv">9</span>%</span>
<span id="cb67-10"><a href="topology-communities.html#cb67-10" tabindex="-1"></a>   Getting node community edge density...<span class="dv">11</span>%</span>
<span id="cb67-11"><a href="topology-communities.html#cb67-11" tabindex="-1"></a>   Getting node community edge density...<span class="dv">12</span>%</span>
<span id="cb67-12"><a href="topology-communities.html#cb67-12" tabindex="-1"></a>   Getting node community edge density...<span class="dv">14</span>%</span>
<span id="cb67-13"><a href="topology-communities.html#cb67-13" tabindex="-1"></a>   Getting node community edge density...<span class="dv">16</span>%</span>
<span id="cb67-14"><a href="topology-communities.html#cb67-14" tabindex="-1"></a>   Getting node community edge density...<span class="dv">18</span>%</span>
<span id="cb67-15"><a href="topology-communities.html#cb67-15" tabindex="-1"></a>   Getting node community edge density...<span class="dv">20</span>%</span>
<span id="cb67-16"><a href="topology-communities.html#cb67-16" tabindex="-1"></a>   Getting node community edge density...<span class="dv">22</span>%</span>
<span id="cb67-17"><a href="topology-communities.html#cb67-17" tabindex="-1"></a>   Getting node community edge density...<span class="dv">24</span>%</span>
<span id="cb67-18"><a href="topology-communities.html#cb67-18" tabindex="-1"></a>   Getting node community edge density...<span class="dv">25</span>%</span>
<span id="cb67-19"><a href="topology-communities.html#cb67-19" tabindex="-1"></a>   Getting node community edge density...<span class="dv">27</span>%</span>
<span id="cb67-20"><a href="topology-communities.html#cb67-20" tabindex="-1"></a>   Getting node community edge density...<span class="dv">29</span>%</span>
<span id="cb67-21"><a href="topology-communities.html#cb67-21" tabindex="-1"></a>   Getting node community edge density...<span class="dv">31</span>%</span>
<span id="cb67-22"><a href="topology-communities.html#cb67-22" tabindex="-1"></a>   Getting node community edge density...<span class="dv">33</span>%</span>
<span id="cb67-23"><a href="topology-communities.html#cb67-23" tabindex="-1"></a>   Getting node community edge density...<span class="dv">35</span>%</span>
<span id="cb67-24"><a href="topology-communities.html#cb67-24" tabindex="-1"></a>   Getting node community edge density...<span class="dv">37</span>%</span>
<span id="cb67-25"><a href="topology-communities.html#cb67-25" tabindex="-1"></a>   Getting node community edge density...<span class="dv">38</span>%</span>
<span id="cb67-26"><a href="topology-communities.html#cb67-26" tabindex="-1"></a>   Getting node community edge density...<span class="dv">40</span>%</span>
<span id="cb67-27"><a href="topology-communities.html#cb67-27" tabindex="-1"></a>   Getting node community edge density...<span class="dv">42</span>%</span>
<span id="cb67-28"><a href="topology-communities.html#cb67-28" tabindex="-1"></a>   Getting node community edge density...<span class="dv">44</span>%</span>
<span id="cb67-29"><a href="topology-communities.html#cb67-29" tabindex="-1"></a>   Getting node community edge density...<span class="dv">46</span>%</span>
<span id="cb67-30"><a href="topology-communities.html#cb67-30" tabindex="-1"></a>   Getting node community edge density...<span class="dv">48</span>%</span>
<span id="cb67-31"><a href="topology-communities.html#cb67-31" tabindex="-1"></a>   Getting node community edge density...<span class="dv">50</span>%</span>
<span id="cb67-32"><a href="topology-communities.html#cb67-32" tabindex="-1"></a>   Getting node community edge density...<span class="dv">51</span>%</span>
<span id="cb67-33"><a href="topology-communities.html#cb67-33" tabindex="-1"></a>   Getting node community edge density...<span class="dv">53</span>%</span>
<span id="cb67-34"><a href="topology-communities.html#cb67-34" tabindex="-1"></a>   Getting node community edge density...<span class="dv">55</span>%</span>
<span id="cb67-35"><a href="topology-communities.html#cb67-35" tabindex="-1"></a>   Getting node community edge density...<span class="dv">57</span>%</span>
<span id="cb67-36"><a href="topology-communities.html#cb67-36" tabindex="-1"></a>   Getting node community edge density...<span class="dv">59</span>%</span>
<span id="cb67-37"><a href="topology-communities.html#cb67-37" tabindex="-1"></a>   Getting node community edge density...<span class="dv">61</span>%</span>
<span id="cb67-38"><a href="topology-communities.html#cb67-38" tabindex="-1"></a>   Getting node community edge density...<span class="dv">62</span>%</span>
<span id="cb67-39"><a href="topology-communities.html#cb67-39" tabindex="-1"></a>   Getting node community edge density...<span class="dv">64</span>%</span>
<span id="cb67-40"><a href="topology-communities.html#cb67-40" tabindex="-1"></a>   Getting node community edge density...<span class="dv">66</span>%</span>
<span id="cb67-41"><a href="topology-communities.html#cb67-41" tabindex="-1"></a>   Getting node community edge density...<span class="dv">68</span>%</span>
<span id="cb67-42"><a href="topology-communities.html#cb67-42" tabindex="-1"></a>   Getting node community edge density...<span class="dv">70</span>%</span>
<span id="cb67-43"><a href="topology-communities.html#cb67-43" tabindex="-1"></a>   Getting node community edge density...<span class="dv">72</span>%</span>
<span id="cb67-44"><a href="topology-communities.html#cb67-44" tabindex="-1"></a>   Getting node community edge density...<span class="dv">74</span>%</span>
<span id="cb67-45"><a href="topology-communities.html#cb67-45" tabindex="-1"></a>   Getting node community edge density...<span class="dv">75</span>%</span>
<span id="cb67-46"><a href="topology-communities.html#cb67-46" tabindex="-1"></a>   Getting node community edge density...<span class="dv">77</span>%</span>
<span id="cb67-47"><a href="topology-communities.html#cb67-47" tabindex="-1"></a>   Getting node community edge density...<span class="dv">79</span>%</span>
<span id="cb67-48"><a href="topology-communities.html#cb67-48" tabindex="-1"></a>   Getting node community edge density...<span class="dv">81</span>%</span>
<span id="cb67-49"><a href="topology-communities.html#cb67-49" tabindex="-1"></a>   Getting node community edge density...<span class="dv">83</span>%</span>
<span id="cb67-50"><a href="topology-communities.html#cb67-50" tabindex="-1"></a>   Getting node community edge density...<span class="dv">85</span>%</span>
<span id="cb67-51"><a href="topology-communities.html#cb67-51" tabindex="-1"></a>   Getting node community edge density...<span class="dv">87</span>%</span>
<span id="cb67-52"><a href="topology-communities.html#cb67-52" tabindex="-1"></a>   Getting node community edge density...<span class="dv">88</span>%</span>
<span id="cb67-53"><a href="topology-communities.html#cb67-53" tabindex="-1"></a>   Getting node community edge density...<span class="dv">90</span>%</span>
<span id="cb67-54"><a href="topology-communities.html#cb67-54" tabindex="-1"></a>   Getting node community edge density...<span class="dv">92</span>%</span>
<span id="cb67-55"><a href="topology-communities.html#cb67-55" tabindex="-1"></a>   Getting node community edge density...<span class="dv">94</span>%</span>
<span id="cb67-56"><a href="topology-communities.html#cb67-56" tabindex="-1"></a>   Getting node community edge density...<span class="dv">96</span>%</span>
<span id="cb67-57"><a href="topology-communities.html#cb67-57" tabindex="-1"></a>   Getting node community edge density...<span class="dv">98</span>%</span>
<span id="cb67-58"><a href="topology-communities.html#cb67-58" tabindex="-1"></a>   Getting node community edge density...<span class="dv">100</span>%</span>
<span id="cb67-59"><a href="topology-communities.html#cb67-59" tabindex="-1"></a><span class="co">#&gt;    Getting node layout...</span></span>
<span id="cb67-60"><a href="topology-communities.html#cb67-60" tabindex="-1"></a><span class="co">#&gt;    Constructing node pies...1%</span></span>
<span id="cb67-61"><a href="topology-communities.html#cb67-61" tabindex="-1"></a>   Constructing node pies...<span class="dv">3</span>%</span>
<span id="cb67-62"><a href="topology-communities.html#cb67-62" tabindex="-1"></a>   Constructing node pies...<span class="dv">5</span>%</span>
<span id="cb67-63"><a href="topology-communities.html#cb67-63" tabindex="-1"></a>   Constructing node pies...<span class="dv">7</span>%</span>
<span id="cb67-64"><a href="topology-communities.html#cb67-64" tabindex="-1"></a>   Constructing node pies...<span class="dv">9</span>%</span>
<span id="cb67-65"><a href="topology-communities.html#cb67-65" tabindex="-1"></a>   Constructing node pies...<span class="dv">11</span>%</span>
<span id="cb67-66"><a href="topology-communities.html#cb67-66" tabindex="-1"></a>   Constructing node pies...<span class="dv">12</span>%</span>
<span id="cb67-67"><a href="topology-communities.html#cb67-67" tabindex="-1"></a>   Constructing node pies...<span class="dv">14</span>%</span>
<span id="cb67-68"><a href="topology-communities.html#cb67-68" tabindex="-1"></a>   Constructing node pies...<span class="dv">16</span>%</span>
<span id="cb67-69"><a href="topology-communities.html#cb67-69" tabindex="-1"></a>   Constructing node pies...<span class="dv">18</span>%</span>
<span id="cb67-70"><a href="topology-communities.html#cb67-70" tabindex="-1"></a>   Constructing node pies...<span class="dv">20</span>%</span>
<span id="cb67-71"><a href="topology-communities.html#cb67-71" tabindex="-1"></a>   Constructing node pies...<span class="dv">22</span>%</span>
<span id="cb67-72"><a href="topology-communities.html#cb67-72" tabindex="-1"></a>   Constructing node pies...<span class="dv">24</span>%</span>
<span id="cb67-73"><a href="topology-communities.html#cb67-73" tabindex="-1"></a>   Constructing node pies...<span class="dv">25</span>%</span>
<span id="cb67-74"><a href="topology-communities.html#cb67-74" tabindex="-1"></a>   Constructing node pies...<span class="dv">27</span>%</span>
<span id="cb67-75"><a href="topology-communities.html#cb67-75" tabindex="-1"></a>   Constructing node pies...<span class="dv">29</span>%</span>
<span id="cb67-76"><a href="topology-communities.html#cb67-76" tabindex="-1"></a>   Constructing node pies...<span class="dv">31</span>%</span>
<span id="cb67-77"><a href="topology-communities.html#cb67-77" tabindex="-1"></a>   Constructing node pies...<span class="dv">33</span>%</span>
<span id="cb67-78"><a href="topology-communities.html#cb67-78" tabindex="-1"></a>   Constructing node pies...<span class="dv">35</span>%</span>
<span id="cb67-79"><a href="topology-communities.html#cb67-79" tabindex="-1"></a>   Constructing node pies...<span class="dv">37</span>%</span>
<span id="cb67-80"><a href="topology-communities.html#cb67-80" tabindex="-1"></a>   Constructing node pies...<span class="dv">38</span>%</span>
<span id="cb67-81"><a href="topology-communities.html#cb67-81" tabindex="-1"></a>   Constructing node pies...<span class="dv">40</span>%</span>
<span id="cb67-82"><a href="topology-communities.html#cb67-82" tabindex="-1"></a>   Constructing node pies...<span class="dv">42</span>%</span>
<span id="cb67-83"><a href="topology-communities.html#cb67-83" tabindex="-1"></a>   Constructing node pies...<span class="dv">44</span>%</span>
<span id="cb67-84"><a href="topology-communities.html#cb67-84" tabindex="-1"></a>   Constructing node pies...<span class="dv">46</span>%</span>
<span id="cb67-85"><a href="topology-communities.html#cb67-85" tabindex="-1"></a>   Constructing node pies...<span class="dv">48</span>%</span>
<span id="cb67-86"><a href="topology-communities.html#cb67-86" tabindex="-1"></a>   Constructing node pies...<span class="dv">50</span>%</span>
<span id="cb67-87"><a href="topology-communities.html#cb67-87" tabindex="-1"></a>   Constructing node pies...<span class="dv">51</span>%</span>
<span id="cb67-88"><a href="topology-communities.html#cb67-88" tabindex="-1"></a>   Constructing node pies...<span class="dv">53</span>%</span>
<span id="cb67-89"><a href="topology-communities.html#cb67-89" tabindex="-1"></a>   Constructing node pies...<span class="dv">55</span>%</span>
<span id="cb67-90"><a href="topology-communities.html#cb67-90" tabindex="-1"></a>   Constructing node pies...<span class="dv">57</span>%</span>
<span id="cb67-91"><a href="topology-communities.html#cb67-91" tabindex="-1"></a>   Constructing node pies...<span class="dv">59</span>%</span>
<span id="cb67-92"><a href="topology-communities.html#cb67-92" tabindex="-1"></a>   Constructing node pies...<span class="dv">61</span>%</span>
<span id="cb67-93"><a href="topology-communities.html#cb67-93" tabindex="-1"></a>   Constructing node pies...<span class="dv">62</span>%</span>
<span id="cb67-94"><a href="topology-communities.html#cb67-94" tabindex="-1"></a>   Constructing node pies...<span class="dv">64</span>%</span>
<span id="cb67-95"><a href="topology-communities.html#cb67-95" tabindex="-1"></a>   Constructing node pies...<span class="dv">66</span>%</span>
<span id="cb67-96"><a href="topology-communities.html#cb67-96" tabindex="-1"></a>   Constructing node pies...<span class="dv">68</span>%</span>
<span id="cb67-97"><a href="topology-communities.html#cb67-97" tabindex="-1"></a>   Constructing node pies...<span class="dv">70</span>%</span>
<span id="cb67-98"><a href="topology-communities.html#cb67-98" tabindex="-1"></a>   Constructing node pies...<span class="dv">72</span>%</span>
<span id="cb67-99"><a href="topology-communities.html#cb67-99" tabindex="-1"></a>   Constructing node pies...<span class="dv">74</span>%</span>
<span id="cb67-100"><a href="topology-communities.html#cb67-100" tabindex="-1"></a>   Constructing node pies...<span class="dv">75</span>%</span>
<span id="cb67-101"><a href="topology-communities.html#cb67-101" tabindex="-1"></a>   Constructing node pies...<span class="dv">77</span>%</span>
<span id="cb67-102"><a href="topology-communities.html#cb67-102" tabindex="-1"></a>   Constructing node pies...<span class="dv">79</span>%</span>
<span id="cb67-103"><a href="topology-communities.html#cb67-103" tabindex="-1"></a>   Constructing node pies...<span class="dv">81</span>%</span>
<span id="cb67-104"><a href="topology-communities.html#cb67-104" tabindex="-1"></a>   Constructing node pies...<span class="dv">83</span>%</span>
<span id="cb67-105"><a href="topology-communities.html#cb67-105" tabindex="-1"></a>   Constructing node pies...<span class="dv">85</span>%</span>
<span id="cb67-106"><a href="topology-communities.html#cb67-106" tabindex="-1"></a>   Constructing node pies...<span class="dv">87</span>%</span>
<span id="cb67-107"><a href="topology-communities.html#cb67-107" tabindex="-1"></a>   Constructing node pies...<span class="dv">88</span>%</span>
<span id="cb67-108"><a href="topology-communities.html#cb67-108" tabindex="-1"></a>   Constructing node pies...<span class="dv">90</span>%</span>
<span id="cb67-109"><a href="topology-communities.html#cb67-109" tabindex="-1"></a>   Constructing node pies...<span class="dv">92</span>%</span>
<span id="cb67-110"><a href="topology-communities.html#cb67-110" tabindex="-1"></a>   Constructing node pies...<span class="dv">94</span>%</span>
<span id="cb67-111"><a href="topology-communities.html#cb67-111" tabindex="-1"></a>   Constructing node pies...<span class="dv">96</span>%</span>
<span id="cb67-112"><a href="topology-communities.html#cb67-112" tabindex="-1"></a>   Constructing node pies...<span class="dv">98</span>%</span>
<span id="cb67-113"><a href="topology-communities.html#cb67-113" tabindex="-1"></a>   Constructing node pies...<span class="dv">100</span>%</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-15-2.png" width="672" /></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="topology-communities.html#cb68-1" tabindex="-1"></a></span>
<span id="cb68-2"><a href="topology-communities.html#cb68-2" tabindex="-1"></a><span class="co">#plot(lc, type = &quot;graph&quot;, layout = &quot;spencer.circle&quot;)</span></span>
<span id="cb68-3"><a href="topology-communities.html#cb68-3" tabindex="-1"></a><span class="do">## see package documentation for more details</span></span></code></pre></div>
<p>Clean environment:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="topology-communities.html#cb69-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<p>Finally, let’s try to reproduce an image with multiple clustering of karateka dataset (<a href="https://network-science-data-and-models.github.io/phys7332_fa25/notebooks/class_08/class_08_communities1.html">here</a>) - this image is included in the slides, and is intended as an illustration of the idea that there are indeed many approaches to the problem of community detection:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="topology-communities.html#cb70-1" tabindex="-1"></a><span class="do">## karateka graph</span></span>
<span id="cb70-2"><a href="topology-communities.html#cb70-2" tabindex="-1"></a>g <span class="ot">&lt;-</span> ison_karateka</span>
<span id="cb70-3"><a href="topology-communities.html#cb70-3" tabindex="-1"></a></span>
<span id="cb70-4"><a href="topology-communities.html#cb70-4" tabindex="-1"></a><span class="do">## list of basic functions from `igraph` package, without detailed specifications</span></span>
<span id="cb70-5"><a href="topology-communities.html#cb70-5" tabindex="-1"></a>functions <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb70-6"><a href="topology-communities.html#cb70-6" tabindex="-1"></a>  <span class="at">edge_betweenness =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_edge_betweenness</span>(graph),</span>
<span id="cb70-7"><a href="topology-communities.html#cb70-7" tabindex="-1"></a>  <span class="at">fluid_comm =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_fast_greedy</span>(graph),</span>
<span id="cb70-8"><a href="topology-communities.html#cb70-8" tabindex="-1"></a>  <span class="at">fast_greedy =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_fast_greedy</span>(graph),</span>
<span id="cb70-9"><a href="topology-communities.html#cb70-9" tabindex="-1"></a>  </span>
<span id="cb70-10"><a href="topology-communities.html#cb70-10" tabindex="-1"></a>  <span class="at">infomap =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_infomap</span>(graph),</span>
<span id="cb70-11"><a href="topology-communities.html#cb70-11" tabindex="-1"></a>  <span class="at">label_prop =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_label_prop</span>(graph),</span>
<span id="cb70-12"><a href="topology-communities.html#cb70-12" tabindex="-1"></a>  <span class="at">ledaing_eigen =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_leading_eigen</span>(graph),</span>
<span id="cb70-13"><a href="topology-communities.html#cb70-13" tabindex="-1"></a>  <span class="at">leiden =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_leiden</span>(graph),</span>
<span id="cb70-14"><a href="topology-communities.html#cb70-14" tabindex="-1"></a>  <span class="at">louvain =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_louvain</span>(graph),</span>
<span id="cb70-15"><a href="topology-communities.html#cb70-15" tabindex="-1"></a>  <span class="at">optimal =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_optimal</span>(graph),</span>
<span id="cb70-16"><a href="topology-communities.html#cb70-16" tabindex="-1"></a>  <span class="at">spinglass =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_spinglass</span>(graph),</span>
<span id="cb70-17"><a href="topology-communities.html#cb70-17" tabindex="-1"></a>  <span class="at">walktrap =</span> <span class="cf">function</span>(graph) igraph<span class="sc">::</span><span class="fu">cluster_walktrap</span>(graph))</span>
<span id="cb70-18"><a href="topology-communities.html#cb70-18" tabindex="-1"></a></span>
<span id="cb70-19"><a href="topology-communities.html#cb70-19" tabindex="-1"></a></span>
<span id="cb70-20"><a href="topology-communities.html#cb70-20" tabindex="-1"></a><span class="do">## plotting parameters:</span></span>
<span id="cb70-21"><a href="topology-communities.html#cb70-21" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>))</span>
<span id="cb70-22"><a href="topology-communities.html#cb70-22" tabindex="-1"></a></span>
<span id="cb70-23"><a href="topology-communities.html#cb70-23" tabindex="-1"></a><span class="do">## loop through the functions:</span></span>
<span id="cb70-24"><a href="topology-communities.html#cb70-24" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>)){</span>
<span id="cb70-25"><a href="topology-communities.html#cb70-25" tabindex="-1"></a>  </span>
<span id="cb70-26"><a href="topology-communities.html#cb70-26" tabindex="-1"></a>  <span class="fu">V</span>(g)<span class="sc">$</span>group <span class="ot">=</span> functions[[i]](g) <span class="sc">%&gt;%</span> </span>
<span id="cb70-27"><a href="topology-communities.html#cb70-27" tabindex="-1"></a>    <span class="fu">membership</span>()</span>
<span id="cb70-28"><a href="topology-communities.html#cb70-28" tabindex="-1"></a>  </span>
<span id="cb70-29"><a href="topology-communities.html#cb70-29" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb70-30"><a href="topology-communities.html#cb70-30" tabindex="-1"></a>  <span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb70-31"><a href="topology-communities.html#cb70-31" tabindex="-1"></a>  </span>
<span id="cb70-32"><a href="topology-communities.html#cb70-32" tabindex="-1"></a>  g <span class="sc">%&gt;%</span> </span>
<span id="cb70-33"><a href="topology-communities.html#cb70-33" tabindex="-1"></a>    <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb70-34"><a href="topology-communities.html#cb70-34" tabindex="-1"></a>         <span class="at">vertex.size =</span> <span class="dv">12</span>,</span>
<span id="cb70-35"><a href="topology-communities.html#cb70-35" tabindex="-1"></a>         <span class="at">cex.main =</span> <span class="fl">0.8</span>,</span>
<span id="cb70-36"><a href="topology-communities.html#cb70-36" tabindex="-1"></a>         <span class="at">main =</span> functions[i] <span class="sc">%&gt;%</span></span>
<span id="cb70-37"><a href="topology-communities.html#cb70-37" tabindex="-1"></a>           <span class="fu">toString</span>() <span class="sc">%&gt;%</span></span>
<span id="cb70-38"><a href="topology-communities.html#cb70-38" tabindex="-1"></a>           <span class="fu">str_remove_all</span>(<span class="st">&quot;function </span><span class="sc">\\</span><span class="st">(graph</span><span class="sc">\\</span><span class="st">) </span><span class="sc">\\</span><span class="st">n|igraph</span><span class="sc">\\</span><span class="st">:</span><span class="sc">\\</span><span class="st">:|</span><span class="sc">\\</span><span class="st">(graph</span><span class="sc">\\</span><span class="st">)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb70-39"><a href="topology-communities.html#cb70-39" tabindex="-1"></a>           <span class="fu">str_c</span>(<span class="st">&quot;()&quot;</span>),</span>
<span id="cb70-40"><a href="topology-communities.html#cb70-40" tabindex="-1"></a>         <span class="at">vertex.color =</span> <span class="fu">V</span>(g)<span class="sc">$</span>group)</span>
<span id="cb70-41"><a href="topology-communities.html#cb70-41" tabindex="-1"></a>}</span>
<span id="cb70-42"><a href="topology-communities.html#cb70-42" tabindex="-1"></a><span class="co">#&gt; Warning in igraph::cluster_edge_betweenness(graph): At</span></span>
<span id="cb70-43"><a href="topology-communities.html#cb70-43" tabindex="-1"></a><span class="co">#&gt; vendor/cigraph/src/community/edge_betweenness.c:503 :</span></span>
<span id="cb70-44"><a href="topology-communities.html#cb70-44" tabindex="-1"></a><span class="co">#&gt; Membership vector will be selected based on the highest</span></span>
<span id="cb70-45"><a href="topology-communities.html#cb70-45" tabindex="-1"></a><span class="co">#&gt; modularity score.</span></span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="case-study-last-week-openalex-network" class="section level2 unnumbered">
<h2><strong>Case study: last week OpenAlex network</strong></h2>
<p>Last week we have discussed bibliographic networks you can obtain using OpenAlex, an open science source of articles’ metadata and citations’ information. Below is a brief illustration of today’s measures on this network:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="topology-communities.html#cb71-1" tabindex="-1"></a><span class="fu">library</span>(openalexR)</span>
<span id="cb71-2"><a href="topology-communities.html#cb71-2" tabindex="-1"></a><span class="co">#&gt; Thank you for using openalexR!</span></span>
<span id="cb71-3"><a href="topology-communities.html#cb71-3" tabindex="-1"></a><span class="co">#&gt; To acknowledge our work, please cite the package by calling `citation(&quot;openalexR&quot;)`.</span></span>
<span id="cb71-4"><a href="topology-communities.html#cb71-4" tabindex="-1"></a><span class="co">#&gt; To suppress this message, add `openalexR.message = suppressed` to your .Renviron file.</span></span>
<span id="cb71-5"><a href="topology-communities.html#cb71-5" tabindex="-1"></a></span>
<span id="cb71-6"><a href="topology-communities.html#cb71-6" tabindex="-1"></a>oa_sustainable <span class="ot">&lt;-</span> <span class="fu">oa_fetch</span>(<span class="at">entity =</span> <span class="st">&quot;works&quot;</span>,</span>
<span id="cb71-7"><a href="topology-communities.html#cb71-7" tabindex="-1"></a>         <span class="at">output =</span> <span class="st">&quot;dataframe&quot;</span>,</span>
<span id="cb71-8"><a href="topology-communities.html#cb71-8" tabindex="-1"></a>         <span class="at">display_name.search =</span> <span class="st">&#39;Sustainable Business Models&#39;</span>,</span>
<span id="cb71-9"><a href="topology-communities.html#cb71-9" tabindex="-1"></a>         <span class="at">cited_by_count =</span> <span class="st">&quot;&gt;10&quot;</span>,</span>
<span id="cb71-10"><a href="topology-communities.html#cb71-10" tabindex="-1"></a>         <span class="at">verbose =</span> T) <span class="do">## takes around 20 seconds with my internet connection</span></span>
<span id="cb71-11"><a href="topology-communities.html#cb71-11" tabindex="-1"></a><span class="co">#&gt; Requesting url: https://api.openalex.org/works?filter=display_name.search%3ASustainable%20Business%20Models%2Ccited_by_count%3A%3E10</span></span>
<span id="cb71-12"><a href="topology-communities.html#cb71-12" tabindex="-1"></a><span class="co">#&gt; Getting 5 pages of results with a total of 896 records...</span></span>
<span id="cb71-13"><a href="topology-communities.html#cb71-13" tabindex="-1"></a></span>
<span id="cb71-14"><a href="topology-communities.html#cb71-14" tabindex="-1"></a>oa_edges <span class="ot">&lt;-</span> oa_sustainable <span class="sc">%&gt;%</span> </span>
<span id="cb71-15"><a href="topology-communities.html#cb71-15" tabindex="-1"></a>  <span class="fu">select</span>(id, referenced_works) <span class="sc">%&gt;%</span> </span>
<span id="cb71-16"><a href="topology-communities.html#cb71-16" tabindex="-1"></a>  <span class="fu">unnest</span>(referenced_works) <span class="sc">%&gt;%</span> </span>
<span id="cb71-17"><a href="topology-communities.html#cb71-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">referenced_works =</span> <span class="fu">str_squish</span>(<span class="fu">str_remove_all</span>(referenced_works,</span>
<span id="cb71-18"><a href="topology-communities.html#cb71-18" tabindex="-1"></a>                                                      <span class="st">&quot;https</span><span class="sc">\\</span><span class="st">:</span><span class="sc">\\</span><span class="st">/</span><span class="sc">\\</span><span class="st">/openalex</span><span class="sc">\\</span><span class="st">.org</span><span class="sc">\\</span><span class="st">/&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb71-19"><a href="topology-communities.html#cb71-19" tabindex="-1"></a></span>
<span id="cb71-20"><a href="topology-communities.html#cb71-20" tabindex="-1"></a>  <span class="fu">filter</span>(referenced_works <span class="sc">%in%</span> <span class="fu">str_squish</span>(<span class="fu">str_remove_all</span>(oa_sustainable<span class="sc">$</span>id,</span>
<span id="cb71-21"><a href="topology-communities.html#cb71-21" tabindex="-1"></a>                                              <span class="st">&quot;https</span><span class="sc">\\</span><span class="st">:</span><span class="sc">\\</span><span class="st">/</span><span class="sc">\\</span><span class="st">/openalex</span><span class="sc">\\</span><span class="st">.org</span><span class="sc">\\</span><span class="st">/&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb71-22"><a href="topology-communities.html#cb71-22" tabindex="-1"></a>  </span>
<span id="cb71-23"><a href="topology-communities.html#cb71-23" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">str_squish</span>(<span class="fu">str_remove_all</span>(id,</span>
<span id="cb71-24"><a href="topology-communities.html#cb71-24" tabindex="-1"></a>                                        <span class="st">&quot;https</span><span class="sc">\\</span><span class="st">:</span><span class="sc">\\</span><span class="st">/</span><span class="sc">\\</span><span class="st">/openalex</span><span class="sc">\\</span><span class="st">.org</span><span class="sc">\\</span><span class="st">/&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb71-25"><a href="topology-communities.html#cb71-25" tabindex="-1"></a>  <span class="st">`</span><span class="at">colnames&lt;-</span><span class="st">`</span>(<span class="fu">c</span>(<span class="st">&quot;from&quot;</span>, <span class="st">&quot;to&quot;</span>))</span>
<span id="cb71-26"><a href="topology-communities.html#cb71-26" tabindex="-1"></a></span>
<span id="cb71-27"><a href="topology-communities.html#cb71-27" tabindex="-1"></a>oa_g <span class="ot">&lt;-</span> oa_edges <span class="sc">%&gt;%</span> </span>
<span id="cb71-28"><a href="topology-communities.html#cb71-28" tabindex="-1"></a>  <span class="fu">graph_from_data_frame</span>(<span class="at">directed =</span> T,</span>
<span id="cb71-29"><a href="topology-communities.html#cb71-29" tabindex="-1"></a>                        <span class="at">vertices =</span> oa_sustainable <span class="sc">%&gt;%</span> </span>
<span id="cb71-30"><a href="topology-communities.html#cb71-30" tabindex="-1"></a>                          <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">str_remove_all</span>(id,</span>
<span id="cb71-31"><a href="topology-communities.html#cb71-31" tabindex="-1"></a>                                                     <span class="st">&quot;https</span><span class="sc">\\</span><span class="st">:</span><span class="sc">\\</span><span class="st">/</span><span class="sc">\\</span><span class="st">/openalex</span><span class="sc">\\</span><span class="st">.org</span><span class="sc">\\</span><span class="st">/&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb71-32"><a href="topology-communities.html#cb71-32" tabindex="-1"></a>                          <span class="fu">select</span>(id, title, publication_year, so, cited_by_count)) <span class="sc">%&gt;%</span> </span>
<span id="cb71-33"><a href="topology-communities.html#cb71-33" tabindex="-1"></a>  <span class="fu">simplify</span>()</span>
<span id="cb71-34"><a href="topology-communities.html#cb71-34" tabindex="-1"></a></span>
<span id="cb71-35"><a href="topology-communities.html#cb71-35" tabindex="-1"></a><span class="do">## leave biggest component only</span></span>
<span id="cb71-36"><a href="topology-communities.html#cb71-36" tabindex="-1"></a></span>
<span id="cb71-37"><a href="topology-communities.html#cb71-37" tabindex="-1"></a>components <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">clusters</span>(oa_g, <span class="at">mode=</span><span class="st">&quot;weak&quot;</span>)</span>
<span id="cb71-38"><a href="topology-communities.html#cb71-38" tabindex="-1"></a><span class="co">#&gt; Warning: `clusters()` was deprecated in igraph 2.0.0.</span></span>
<span id="cb71-39"><a href="topology-communities.html#cb71-39" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `components()` instead.</span></span>
<span id="cb71-40"><a href="topology-communities.html#cb71-40" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once every 8 hours.</span></span>
<span id="cb71-41"><a href="topology-communities.html#cb71-41" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where</span></span>
<span id="cb71-42"><a href="topology-communities.html#cb71-42" tabindex="-1"></a><span class="co">#&gt; this warning was generated.</span></span>
<span id="cb71-43"><a href="topology-communities.html#cb71-43" tabindex="-1"></a>biggest_cluster_id <span class="ot">&lt;-</span> <span class="fu">which.max</span>(components<span class="sc">$</span>csize)</span>
<span id="cb71-44"><a href="topology-communities.html#cb71-44" tabindex="-1"></a></span>
<span id="cb71-45"><a href="topology-communities.html#cb71-45" tabindex="-1"></a><span class="co"># subgraph</span></span>
<span id="cb71-46"><a href="topology-communities.html#cb71-46" tabindex="-1"></a>oa_g.biggest <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">induced_subgraph</span>(oa_g,</span>
<span id="cb71-47"><a href="topology-communities.html#cb71-47" tabindex="-1"></a>                                         <span class="fu">V</span>(oa_g)[components<span class="sc">$</span>membership <span class="sc">==</span> biggest_cluster_id])</span>
<span id="cb71-48"><a href="topology-communities.html#cb71-48" tabindex="-1"></a></span>
<span id="cb71-49"><a href="topology-communities.html#cb71-49" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb71-50"><a href="topology-communities.html#cb71-50" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">31</span>)</span>
<span id="cb71-51"><a href="topology-communities.html#cb71-51" tabindex="-1"></a>oa_g.biggest <span class="sc">%&gt;%</span> </span>
<span id="cb71-52"><a href="topology-communities.html#cb71-52" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb71-53"><a href="topology-communities.html#cb71-53" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">3</span>,</span>
<span id="cb71-54"><a href="topology-communities.html#cb71-54" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="st">&quot;coral1&quot;</span>,</span>
<span id="cb71-55"><a href="topology-communities.html#cb71-55" tabindex="-1"></a>       <span class="at">edge.color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb71-56"><a href="topology-communities.html#cb71-56" tabindex="-1"></a>       <span class="at">edge.size =</span> <span class="dv">1</span>,</span>
<span id="cb71-57"><a href="topology-communities.html#cb71-57" tabindex="-1"></a>       <span class="at">edge.arrow.size =</span> <span class="fl">0.5</span>, <span class="at">edge.arrow.width =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>We start by computing the very basic indicators:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="topology-communities.html#cb72-1" tabindex="-1"></a><span class="fu">diameter</span>(oa_g.biggest) <span class="do">## 8</span></span>
<span id="cb72-2"><a href="topology-communities.html#cb72-2" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span>
<span id="cb72-3"><a href="topology-communities.html#cb72-3" tabindex="-1"></a><span class="fu">average.path.length</span>(oa_g.biggest) <span class="do">## 2.63</span></span>
<span id="cb72-4"><a href="topology-communities.html#cb72-4" tabindex="-1"></a><span class="co">#&gt; Warning: `average.path.length()` was deprecated in igraph 2.0.0.</span></span>
<span id="cb72-5"><a href="topology-communities.html#cb72-5" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `mean_distance()` instead.</span></span>
<span id="cb72-6"><a href="topology-communities.html#cb72-6" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once every 8 hours.</span></span>
<span id="cb72-7"><a href="topology-communities.html#cb72-7" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where</span></span>
<span id="cb72-8"><a href="topology-communities.html#cb72-8" tabindex="-1"></a><span class="co">#&gt; this warning was generated.</span></span>
<span id="cb72-9"><a href="topology-communities.html#cb72-9" tabindex="-1"></a><span class="co">#&gt; [1] 2.629412</span></span>
<span id="cb72-10"><a href="topology-communities.html#cb72-10" tabindex="-1"></a><span class="fu">edge_density</span>(oa_g.biggest <span class="sc">%&gt;%</span> </span>
<span id="cb72-11"><a href="topology-communities.html#cb72-11" tabindex="-1"></a>               <span class="fu">as_undirected</span>()) <span class="do">## 0.02</span></span>
<span id="cb72-12"><a href="topology-communities.html#cb72-12" tabindex="-1"></a><span class="co">#&gt; [1] 0.02245943</span></span>
<span id="cb72-13"><a href="topology-communities.html#cb72-13" tabindex="-1"></a>(<span class="fu">centr_degree</span>(oa_g.biggest, <span class="at">loops=</span>F))<span class="sc">$</span>centralization <span class="do">## 0.23</span></span>
<span id="cb72-14"><a href="topology-communities.html#cb72-14" tabindex="-1"></a><span class="co">#&gt; [1] 0.2329838</span></span></code></pre></div>
<p>Let’s further try to map core/periphery and find communities:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="topology-communities.html#cb73-1" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb73-2"><a href="topology-communities.html#cb73-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">31</span>)</span>
<span id="cb73-3"><a href="topology-communities.html#cb73-3" tabindex="-1"></a><span class="fu">V</span>(oa_g.biggest)<span class="sc">$</span>core <span class="ot">=</span> <span class="fu">core_periphery</span>(oa_g.biggest)<span class="sc">$</span>vec</span>
<span id="cb73-4"><a href="topology-communities.html#cb73-4" tabindex="-1"></a>oa_g.biggest <span class="sc">%&gt;%</span> </span>
<span id="cb73-5"><a href="topology-communities.html#cb73-5" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb73-6"><a href="topology-communities.html#cb73-6" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="fu">ifelse</span>(<span class="fu">V</span>(oa_g.biggest)<span class="sc">$</span>core <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb73-7"><a href="topology-communities.html#cb73-7" tabindex="-1"></a>                             <span class="st">&quot;coral1&quot;</span>,</span>
<span id="cb73-8"><a href="topology-communities.html#cb73-8" tabindex="-1"></a>                             <span class="st">&quot;grey70&quot;</span>),</span>
<span id="cb73-9"><a href="topology-communities.html#cb73-9" tabindex="-1"></a>       </span>
<span id="cb73-10"><a href="topology-communities.html#cb73-10" tabindex="-1"></a>       <span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb73-11"><a href="topology-communities.html#cb73-11" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">3</span>,</span>
<span id="cb73-12"><a href="topology-communities.html#cb73-12" tabindex="-1"></a>       <span class="at">edge.color =</span> <span class="st">&quot;grey70&quot;</span>,</span>
<span id="cb73-13"><a href="topology-communities.html#cb73-13" tabindex="-1"></a>       <span class="at">edge.size =</span> <span class="dv">1</span>,</span>
<span id="cb73-14"><a href="topology-communities.html#cb73-14" tabindex="-1"></a>       <span class="at">edge.arrow.size =</span> <span class="fl">0.5</span>,</span>
<span id="cb73-15"><a href="topology-communities.html#cb73-15" tabindex="-1"></a>       <span class="at">edge.arrow.width =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>And what about the communities?</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="topology-communities.html#cb74-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">31</span>)</span>
<span id="cb74-2"><a href="topology-communities.html#cb74-2" tabindex="-1"></a>cl1 <span class="ot">&lt;-</span> <span class="fu">cluster_louvain</span>(oa_g.biggest <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="topology-communities.html#cb74-3" tabindex="-1"></a>                            <span class="fu">as_undirected</span>(),</span>
<span id="cb74-4"><a href="topology-communities.html#cb74-4" tabindex="-1"></a>                          <span class="at">resolution =</span> <span class="fl">0.8</span>)</span>
<span id="cb74-5"><a href="topology-communities.html#cb74-5" tabindex="-1"></a></span>
<span id="cb74-6"><a href="topology-communities.html#cb74-6" tabindex="-1"></a><span class="fu">V</span>(oa_g.biggest)<span class="sc">$</span>cl1 <span class="ot">=</span> <span class="fu">membership</span>(cl1)</span>
<span id="cb74-7"><a href="topology-communities.html#cb74-7" tabindex="-1"></a></span>
<span id="cb74-8"><a href="topology-communities.html#cb74-8" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb74-9"><a href="topology-communities.html#cb74-9" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">31</span>)</span>
<span id="cb74-10"><a href="topology-communities.html#cb74-10" tabindex="-1"></a></span>
<span id="cb74-11"><a href="topology-communities.html#cb74-11" tabindex="-1"></a><span class="fu">plot</span>(oa_g.biggest,</span>
<span id="cb74-12"><a href="topology-communities.html#cb74-12" tabindex="-1"></a>     <span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb74-13"><a href="topology-communities.html#cb74-13" tabindex="-1"></a>     <span class="at">vertex.color =</span> <span class="fu">V</span>(oa_g.biggest)<span class="sc">$</span>cl1,</span>
<span id="cb74-14"><a href="topology-communities.html#cb74-14" tabindex="-1"></a>            <span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb74-15"><a href="topology-communities.html#cb74-15" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">3</span>,</span>
<span id="cb74-16"><a href="topology-communities.html#cb74-16" tabindex="-1"></a>       <span class="at">edge.color =</span> <span class="st">&quot;grey70&quot;</span>,</span>
<span id="cb74-17"><a href="topology-communities.html#cb74-17" tabindex="-1"></a>       <span class="at">edge.size =</span> <span class="dv">1</span>,</span>
<span id="cb74-18"><a href="topology-communities.html#cb74-18" tabindex="-1"></a>       <span class="at">edge.arrow.size =</span> <span class="fl">0.5</span>,</span>
<span id="cb74-19"><a href="topology-communities.html#cb74-19" tabindex="-1"></a>       <span class="at">edge.arrow.width =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>To dive into the obtained clusters, we can group some attributes of the articles to see what’s hidden inside (note that we calculated the share of nodes associated with the “core” coming from each of the calculated communities. In some cases, it might be a good idea, if your communities coexist with the core/periphery structure, - we will cover one such example briefly next time):</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="topology-communities.html#cb75-1" tabindex="-1"></a>(oa_g.biggest <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="topology-communities.html#cb75-2" tabindex="-1"></a>  <span class="fu">asDF</span>())<span class="sc">$</span>vertex <span class="sc">%&gt;%</span> </span>
<span id="cb75-3"><a href="topology-communities.html#cb75-3" tabindex="-1"></a>  </span>
<span id="cb75-4"><a href="topology-communities.html#cb75-4" tabindex="-1"></a>  <span class="co">#count(cl1) %&gt;% </span></span>
<span id="cb75-5"><a href="topology-communities.html#cb75-5" tabindex="-1"></a>  </span>
<span id="cb75-6"><a href="topology-communities.html#cb75-6" tabindex="-1"></a>  <span class="fu">group_by</span>(cl1) <span class="sc">%&gt;%</span> </span>
<span id="cb75-7"><a href="topology-communities.html#cb75-7" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb75-8"><a href="topology-communities.html#cb75-8" tabindex="-1"></a>            <span class="at">share.core =</span> <span class="fu">round</span>(<span class="fu">mean</span>(core),<span class="dv">2</span>),</span>
<span id="cb75-9"><a href="topology-communities.html#cb75-9" tabindex="-1"></a>            <span class="at">mean.age =</span> <span class="fu">mean</span>(publication_year, <span class="at">na.rm =</span> T))</span>
<span id="cb75-10"><a href="topology-communities.html#cb75-10" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8 × 4</span></span>
<span id="cb75-11"><a href="topology-communities.html#cb75-11" tabindex="-1"></a><span class="co">#&gt;   cl1            n share.core mean.age</span></span>
<span id="cb75-12"><a href="topology-communities.html#cb75-12" tabindex="-1"></a><span class="co">#&gt;   &lt;membrshp&gt; &lt;int&gt;      &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb75-13"><a href="topology-communities.html#cb75-13" tabindex="-1"></a><span class="co">#&gt; 1 1            231       0.16    2019.</span></span>
<span id="cb75-14"><a href="topology-communities.html#cb75-14" tabindex="-1"></a><span class="co">#&gt; 2 2            264       0.23    2018.</span></span>
<span id="cb75-15"><a href="topology-communities.html#cb75-15" tabindex="-1"></a><span class="co">#&gt; 3 3             87       0.06    2020.</span></span>
<span id="cb75-16"><a href="topology-communities.html#cb75-16" tabindex="-1"></a><span class="co">#&gt; 4 4             77       0.04    2020.</span></span>
<span id="cb75-17"><a href="topology-communities.html#cb75-17" tabindex="-1"></a><span class="co">#&gt; 5 5             25       0       2017.</span></span>
<span id="cb75-18"><a href="topology-communities.html#cb75-18" tabindex="-1"></a><span class="co">#&gt; 6 6              2       0       2018.</span></span>
<span id="cb75-19"><a href="topology-communities.html#cb75-19" tabindex="-1"></a><span class="co">#&gt; 7 7              2       0       2021 </span></span>
<span id="cb75-20"><a href="topology-communities.html#cb75-20" tabindex="-1"></a><span class="co">#&gt; 8 8             11       0       2014.</span></span>
<span id="cb75-21"><a href="topology-communities.html#cb75-21" tabindex="-1"></a></span>
<span id="cb75-22"><a href="topology-communities.html#cb75-22" tabindex="-1"></a><span class="co">#(oa_g.biggest %&gt;% </span></span>
<span id="cb75-23"><a href="topology-communities.html#cb75-23" tabindex="-1"></a><span class="co">#  asDF())$vertex %&gt;% </span></span>
<span id="cb75-24"><a href="topology-communities.html#cb75-24" tabindex="-1"></a>  </span>
<span id="cb75-25"><a href="topology-communities.html#cb75-25" tabindex="-1"></a><span class="co">#  ggplot(aes(cited_by_count)) +</span></span>
<span id="cb75-26"><a href="topology-communities.html#cb75-26" tabindex="-1"></a><span class="co">#  geom_histogram() +</span></span>
<span id="cb75-27"><a href="topology-communities.html#cb75-27" tabindex="-1"></a><span class="co">#  facet_wrap(~as.factor(cl1), scales = &quot;free&quot;)</span></span></code></pre></div>
<p>Arguably, we need to adjust our searching query to obtain more meaningful communities, or to use different community detection techniques. At the end of the day, remember, <em>cohesion is easier to measure than to detect communities, and sometimes you do not need to do the latter</em>.</p>
</div>
<div id="networks-to-work-in-gephi" class="section level2 unnumbered">
<h2><strong>Networks to work in Gephi</strong></h2>
<p>Install Gephi: <a href="https://gephi.org/users/download/" class="uri">https://gephi.org/users/download/</a></p>
<p>In this short tutorial, we’ll look at three datasets in Gephi (available via my github, see the code below, or the course folder) - all sent to you with this code in the archive. Below is a simple example of how to load them into R, analyze them, and save them back for analysis.</p>
<div id="insna" class="section level3 unnumbered">
<h3><strong>insna</strong></h3>
<p>The first data set is <code>insna</code>, containing social scientists who studied networks in the 1970s. The data dates back to 1977 and includes information about who taught whom among the participants of the International Network for Social Network Analysis (INSNA). The data was collected by Barry Wellman, the founder of INSNA. Among the 60 participants in the network are Harrison White, Mark Granovetter, Ronald Burt, and Diane Crane.</p>
<p>This data can be obtained from the <code>networkdata</code> package (if you don’t have 5-7 minutes to spare, it’s best not to install this package - it’s very large).</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="topology-communities.html#cb76-1" tabindex="-1"></a><span class="co"># list all datasets from `networkdata` (987 datasets containing 2260 networks)</span></span>
<span id="cb76-2"><a href="topology-communities.html#cb76-2" tabindex="-1"></a><span class="do">## data(package = &quot;networkdata&quot;)</span></span>
<span id="cb76-3"><a href="topology-communities.html#cb76-3" tabindex="-1"></a></span>
<span id="cb76-4"><a href="topology-communities.html#cb76-4" tabindex="-1"></a><span class="co"># datasets from movies:</span></span>
<span id="cb76-5"><a href="topology-communities.html#cb76-5" tabindex="-1"></a><span class="do">## crash &lt;- networkdata::movie_184</span></span>
<span id="cb76-6"><a href="topology-communities.html#cb76-6" tabindex="-1"></a><span class="do">## twilight &lt;- networkdata::movie_721</span></span>
<span id="cb76-7"><a href="topology-communities.html#cb76-7" tabindex="-1"></a></span>
<span id="cb76-8"><a href="topology-communities.html#cb76-8" tabindex="-1"></a>insna <span class="ot">&lt;-</span> networkdata<span class="sc">::</span>insna</span>
<span id="cb76-9"><a href="topology-communities.html#cb76-9" tabindex="-1"></a></span>
<span id="cb76-10"><a href="topology-communities.html#cb76-10" tabindex="-1"></a><span class="fu">V</span>(insna)<span class="sc">$</span>outdegree <span class="ot">=</span> <span class="fu">degree</span>(insna, <span class="at">mode =</span> <span class="st">&quot;out&quot;</span>)</span>
<span id="cb76-11"><a href="topology-communities.html#cb76-11" tabindex="-1"></a><span class="fu">V</span>(insna)<span class="sc">$</span>totaldegree <span class="ot">=</span> <span class="fu">degree</span>(insna, <span class="at">mode =</span> <span class="st">&quot;total&quot;</span>)</span>
<span id="cb76-12"><a href="topology-communities.html#cb76-12" tabindex="-1"></a></span>
<span id="cb76-13"><a href="topology-communities.html#cb76-13" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb76-14"><a href="topology-communities.html#cb76-14" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb76-15"><a href="topology-communities.html#cb76-15" tabindex="-1"></a>insna <span class="sc">%&gt;%</span> </span>
<span id="cb76-16"><a href="topology-communities.html#cb76-16" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb76-17"><a href="topology-communities.html#cb76-17" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="fu">V</span>(insna)<span class="sc">$</span>outdegree<span class="sc">*</span><span class="fl">1.5</span>,</span>
<span id="cb76-18"><a href="topology-communities.html#cb76-18" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb76-19"><a href="topology-communities.html#cb76-19" tabindex="-1"></a>       <span class="at">edge.arrow.width =</span> <span class="fl">0.3</span>)</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>To load lists of edges and nodes, Gephi requires special names for variables:</p>
<ol style="list-style-type: decimal">
<li><p><em>in the edgelist</em>, the first columns should be named “Source” and “Target”,</p></li>
<li><p><em>in the nodelist</em>, the first columns should be named “Id” and “Label”</p></li>
</ol>
<p>This allows Gephi to mark up the data and load everything correctly. In the code below I get the edgelist and nodelist and rename the first columns in them.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="topology-communities.html#cb77-1" tabindex="-1"></a>insna.edgelist <span class="ot">&lt;-</span> (insna <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="topology-communities.html#cb77-2" tabindex="-1"></a>   <span class="fu">asDF</span>())<span class="sc">$</span>edge <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="topology-communities.html#cb77-3" tabindex="-1"></a>  <span class="st">`</span><span class="at">colnames&lt;-</span><span class="st">`</span>(<span class="fu">c</span>(<span class="st">&quot;Source&quot;</span>, <span class="st">&quot;Target&quot;</span>))</span>
<span id="cb77-4"><a href="topology-communities.html#cb77-4" tabindex="-1"></a></span>
<span id="cb77-5"><a href="topology-communities.html#cb77-5" tabindex="-1"></a>insna.nodelist <span class="ot">&lt;-</span> (insna <span class="sc">%&gt;%</span> </span>
<span id="cb77-6"><a href="topology-communities.html#cb77-6" tabindex="-1"></a>   <span class="fu">asDF</span>())<span class="sc">$</span>vertex <span class="sc">%&gt;%</span> </span>
<span id="cb77-7"><a href="topology-communities.html#cb77-7" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Id =</span> intergraph_id,</span>
<span id="cb77-8"><a href="topology-communities.html#cb77-8" tabindex="-1"></a>         <span class="at">Label =</span> name)</span></code></pre></div>
<p>Save the data:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="topology-communities.html#cb78-1" tabindex="-1"></a><span class="co"># do not forget to check the direction of data saving!</span></span>
<span id="cb78-2"><a href="topology-communities.html#cb78-2" tabindex="-1"></a><span class="co">#getwd()</span></span>
<span id="cb78-3"><a href="topology-communities.html#cb78-3" tabindex="-1"></a></span>
<span id="cb78-4"><a href="topology-communities.html#cb78-4" tabindex="-1"></a><span class="fu">write.csv</span>(insna.edgelist,</span>
<span id="cb78-5"><a href="topology-communities.html#cb78-5" tabindex="-1"></a>          <span class="st">&quot;insna.edgelist.csv&quot;</span>,</span>
<span id="cb78-6"><a href="topology-communities.html#cb78-6" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span>
<span id="cb78-7"><a href="topology-communities.html#cb78-7" tabindex="-1"></a><span class="fu">write.csv</span>(insna.nodelist,</span>
<span id="cb78-8"><a href="topology-communities.html#cb78-8" tabindex="-1"></a>          <span class="st">&quot;insna.nodelist.csv&quot;</span>,</span>
<span id="cb78-9"><a href="topology-communities.html#cb78-9" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span></code></pre></div>
<p>Clear environment:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="topology-communities.html#cb79-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
</div>
<div id="twin-peaks-json" class="section level3 unnumbered">
<h3><strong>Twin Peaks (json)</strong></h3>
<p>Our next dataset is about the character interactions in “Twin Peaks”. We are interested in this dataset as:</p>
<ol style="list-style-type: decimal">
<li><p>an example of data in an atypical format that can be converted into familiar lists of nodes and edges,</p></li>
<li><p>from the point of view of the community search: the data already has clustering, but we will also search for communities in R and look at how to search for communities directly in Gephi.</p></li>
</ol>
<p>Load data and look at the network (download json): <a href="https://moviegalaxies.com/movies/view/851/twin-peaks/#" class="uri">https://moviegalaxies.com/movies/view/851/twin-peaks/#</a></p>
<p>Data in the json format is already in the archive.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="topology-communities.html#cb80-1" tabindex="-1"></a><span class="do">## to read json-files:</span></span>
<span id="cb80-2"><a href="topology-communities.html#cb80-2" tabindex="-1"></a><span class="co"># install.packages(&quot;jsonlite&quot;)</span></span>
<span id="cb80-3"><a href="topology-communities.html#cb80-3" tabindex="-1"></a></span>
<span id="cb80-4"><a href="topology-communities.html#cb80-4" tabindex="-1"></a></span>
<span id="cb80-5"><a href="topology-communities.html#cb80-5" tabindex="-1"></a><span class="do">## data loading:</span></span>
<span id="cb80-6"><a href="topology-communities.html#cb80-6" tabindex="-1"></a>twinpeaks <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">&quot;datasets/Moviegalaxies - Twin Peaks.json&quot;</span>,</span>
<span id="cb80-7"><a href="topology-communities.html#cb80-7" tabindex="-1"></a>                      <span class="at">flatten=</span><span class="cn">TRUE</span>)</span>
<span id="cb80-8"><a href="topology-communities.html#cb80-8" tabindex="-1"></a></span>
<span id="cb80-9"><a href="topology-communities.html#cb80-9" tabindex="-1"></a><span class="do">## look at the data structure:</span></span>
<span id="cb80-10"><a href="topology-communities.html#cb80-10" tabindex="-1"></a><span class="co">#twinpeaks</span></span>
<span id="cb80-11"><a href="topology-communities.html#cb80-11" tabindex="-1"></a></span>
<span id="cb80-12"><a href="topology-communities.html#cb80-12" tabindex="-1"></a><span class="do">## edgelist и nodelist:</span></span>
<span id="cb80-13"><a href="topology-communities.html#cb80-13" tabindex="-1"></a>twinpeaks.edges <span class="ot">&lt;-</span> twinpeaks<span class="sc">$</span>network<span class="sc">$</span>edges</span>
<span id="cb80-14"><a href="topology-communities.html#cb80-14" tabindex="-1"></a>twinpeaks.nodes <span class="ot">&lt;-</span> twinpeaks<span class="sc">$</span>network<span class="sc">$</span>nodes</span>
<span id="cb80-15"><a href="topology-communities.html#cb80-15" tabindex="-1"></a></span>
<span id="cb80-16"><a href="topology-communities.html#cb80-16" tabindex="-1"></a><span class="do">## create igraph-object:</span></span>
<span id="cb80-17"><a href="topology-communities.html#cb80-17" tabindex="-1"></a>twinpeaks.g <span class="ot">&lt;-</span> twinpeaks.edges <span class="sc">%&gt;%</span> </span>
<span id="cb80-18"><a href="topology-communities.html#cb80-18" tabindex="-1"></a>  <span class="fu">graph_from_data_frame</span>(<span class="at">vertices =</span> twinpeaks.nodes,</span>
<span id="cb80-19"><a href="topology-communities.html#cb80-19" tabindex="-1"></a>                        <span class="at">directed =</span> F)</span>
<span id="cb80-20"><a href="topology-communities.html#cb80-20" tabindex="-1"></a></span>
<span id="cb80-21"><a href="topology-communities.html#cb80-21" tabindex="-1"></a><span class="do">## community detection:</span></span>
<span id="cb80-22"><a href="topology-communities.html#cb80-22" tabindex="-1"></a></span>
<span id="cb80-23"><a href="topology-communities.html#cb80-23" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb80-24"><a href="topology-communities.html#cb80-24" tabindex="-1"></a>clustering.louvain <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">cluster_louvain</span>(twinpeaks.g,</span>
<span id="cb80-25"><a href="topology-communities.html#cb80-25" tabindex="-1"></a>                                              <span class="at">resolution =</span> <span class="fl">0.7</span>)</span>
<span id="cb80-26"><a href="topology-communities.html#cb80-26" tabindex="-1"></a></span>
<span id="cb80-27"><a href="topology-communities.html#cb80-27" tabindex="-1"></a><span class="fu">V</span>(twinpeaks.g)<span class="sc">$</span>our.louvain <span class="ot">&lt;-</span> <span class="fu">membership</span>(clustering.louvain)</span>
<span id="cb80-28"><a href="topology-communities.html#cb80-28" tabindex="-1"></a></span>
<span id="cb80-29"><a href="topology-communities.html#cb80-29" tabindex="-1"></a><span class="do">## create new nodelist:</span></span>
<span id="cb80-30"><a href="topology-communities.html#cb80-30" tabindex="-1"></a>twinpeaks.nodes2 <span class="ot">&lt;-</span> (twinpeaks.g <span class="sc">%&gt;%</span> </span>
<span id="cb80-31"><a href="topology-communities.html#cb80-31" tabindex="-1"></a>    <span class="fu">asDF</span>())<span class="sc">$</span>vertex</span></code></pre></div>
<p>What is the intersection of the community detection solutions?</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="topology-communities.html#cb81-1" tabindex="-1"></a><span class="co">#twinpeaks.nodes2 %&gt;% </span></span>
<span id="cb81-2"><a href="topology-communities.html#cb81-2" tabindex="-1"></a><span class="co">#  count(group, our.louvain)</span></span>
<span id="cb81-3"><a href="topology-communities.html#cb81-3" tabindex="-1"></a></span>
<span id="cb81-4"><a href="topology-communities.html#cb81-4" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb81-5"><a href="topology-communities.html#cb81-5" tabindex="-1"></a></span>
<span id="cb81-6"><a href="topology-communities.html#cb81-6" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">31</span>)</span>
<span id="cb81-7"><a href="topology-communities.html#cb81-7" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb81-8"><a href="topology-communities.html#cb81-8" tabindex="-1"></a>twinpeaks.g <span class="sc">%&gt;%</span> </span>
<span id="cb81-9"><a href="topology-communities.html#cb81-9" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb81-10"><a href="topology-communities.html#cb81-10" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">7</span>,</span>
<span id="cb81-11"><a href="topology-communities.html#cb81-11" tabindex="-1"></a>       <span class="at">main =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">original mapping</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb81-12"><a href="topology-communities.html#cb81-12" tabindex="-1"></a></span>
<span id="cb81-13"><a href="topology-communities.html#cb81-13" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb81-14"><a href="topology-communities.html#cb81-14" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">31</span>)</span>
<span id="cb81-15"><a href="topology-communities.html#cb81-15" tabindex="-1"></a>twinpeaks.g <span class="sc">%&gt;%</span> </span>
<span id="cb81-16"><a href="topology-communities.html#cb81-16" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">vertex.label =</span> <span class="cn">NA</span>,</span>
<span id="cb81-17"><a href="topology-communities.html#cb81-17" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">7</span>,</span>
<span id="cb81-18"><a href="topology-communities.html#cb81-18" tabindex="-1"></a>       <span class="at">main =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">louvain mapping,</span><span class="sc">\n</span><span class="st">resolution = 0.7&quot;</span>,</span>
<span id="cb81-19"><a href="topology-communities.html#cb81-19" tabindex="-1"></a>       <span class="at">vertex.color =</span> <span class="fu">ifelse</span>(<span class="fu">V</span>(twinpeaks.g)<span class="sc">$</span>our.louvain <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb81-20"><a href="topology-communities.html#cb81-20" tabindex="-1"></a>                             <span class="st">&quot;coral1&quot;</span>,</span>
<span id="cb81-21"><a href="topology-communities.html#cb81-21" tabindex="-1"></a>                             <span class="fu">ifelse</span>(<span class="fu">V</span>(twinpeaks.g)<span class="sc">$</span>our.louvain <span class="sc">==</span> <span class="dv">2</span>,</span>
<span id="cb81-22"><a href="topology-communities.html#cb81-22" tabindex="-1"></a>                                    <span class="st">&quot;green&quot;</span>,</span>
<span id="cb81-23"><a href="topology-communities.html#cb81-23" tabindex="-1"></a>                                    <span class="fu">ifelse</span>(<span class="fu">V</span>(twinpeaks.g)<span class="sc">$</span>our.louvain <span class="sc">==</span> <span class="dv">3</span>,</span>
<span id="cb81-24"><a href="topology-communities.html#cb81-24" tabindex="-1"></a>                                           <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb81-25"><a href="topology-communities.html#cb81-25" tabindex="-1"></a>                                           <span class="st">&quot;grey70&quot;</span>))))</span></code></pre></div>
<p><img src="chapter3_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>Save data for Gephi:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="topology-communities.html#cb82-1" tabindex="-1"></a><span class="do">## note that in the first table the variables are already named correctly, but for the node list we rename and overwrite id:</span></span>
<span id="cb82-2"><a href="topology-communities.html#cb82-2" tabindex="-1"></a></span>
<span id="cb82-3"><a href="topology-communities.html#cb82-3" tabindex="-1"></a><span class="fu">write.csv</span>(twinpeaks.edges <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="topology-communities.html#cb82-4" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">Source =</span> source,</span>
<span id="cb82-5"><a href="topology-communities.html#cb82-5" tabindex="-1"></a>                   <span class="at">Target =</span> target),</span>
<span id="cb82-6"><a href="topology-communities.html#cb82-6" tabindex="-1"></a>          <span class="st">&quot;twinpeaks.edgelist.csv&quot;</span>,</span>
<span id="cb82-7"><a href="topology-communities.html#cb82-7" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span>
<span id="cb82-8"><a href="topology-communities.html#cb82-8" tabindex="-1"></a><span class="fu">write.csv</span>(twinpeaks.nodes2 <span class="sc">%&gt;%</span> </span>
<span id="cb82-9"><a href="topology-communities.html#cb82-9" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">id =</span> intergraph_id) <span class="sc">%&gt;%</span> </span>
<span id="cb82-10"><a href="topology-communities.html#cb82-10" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="at">id =</span> name),</span>
<span id="cb82-11"><a href="topology-communities.html#cb82-11" tabindex="-1"></a>          <span class="st">&quot;twinpeaks.nodelist.csv&quot;</span>,</span>
<span id="cb82-12"><a href="topology-communities.html#cb82-12" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span></code></pre></div>
<p>Clear the environment:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="topology-communities.html#cb83-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
</div>
<div id="dictionary-of-russian-writers-of-the-18th-century-a-network-of-personalities" class="section level3 unnumbered">
<h3><strong>Dictionary of Russian writers of the 18th century: a network of personalities</strong></h3>
<p>Data source: <a href="https://dataverse.pushdom.ru/dataset.xhtml?persistentId=doi:10.31860/openlit-2022.1-B002" class="uri">https://dataverse.pushdom.ru/dataset.xhtml?persistentId=doi:10.31860/openlit-2022.1-B002</a></p>
<p>Although the authors of the dataset write that “data without preliminary processing can be loaded into programs for network analysis when solving educational problems”, it is still better to firstly observe the files in R to get acquainted with their organization, convert them into a format familiar for work, and calculate the statistics of interest.</p>
<p>Following the authors’ advice, however, we will immediately go to Gephi with this dataset and try to do the entire analysis there.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="topology-communities.html#cb84-1" tabindex="-1"></a><span class="co">#list.files() - list files in the directory</span></span>
<span id="cb84-2"><a href="topology-communities.html#cb84-2" tabindex="-1"></a></span>
<span id="cb84-3"><a href="topology-communities.html#cb84-3" tabindex="-1"></a>writers <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;datasets/Persons_EDGES.tab&quot;</span>,</span>
<span id="cb84-4"><a href="topology-communities.html#cb84-4" tabindex="-1"></a>                      <span class="at">header =</span> T)</span>
<span id="cb84-5"><a href="topology-communities.html#cb84-5" tabindex="-1"></a></span>
<span id="cb84-6"><a href="topology-communities.html#cb84-6" tabindex="-1"></a>writers <span class="sc">%&gt;%</span> </span>
<span id="cb84-7"><a href="topology-communities.html#cb84-7" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb84-8"><a href="topology-communities.html#cb84-8" tabindex="-1"></a><span class="co">#&gt;         Source         Target Weight     Type</span></span>
<span id="cb84-9"><a href="topology-communities.html#cb84-9" tabindex="-1"></a><span class="co">#&gt; 1 Н.И.Ахвердов П.И.Богданович      1 directed</span></span>
<span id="cb84-10"><a href="topology-communities.html#cb84-10" tabindex="-1"></a><span class="co">#&gt; 2 А.Д.Байбаков     А.А.Барсов      1 directed</span></span>
<span id="cb84-11"><a href="topology-communities.html#cb84-11" tabindex="-1"></a><span class="co">#&gt; 3 А.Д.Кантемир     А.К.Барсов      1 directed</span></span>
<span id="cb84-12"><a href="topology-communities.html#cb84-12" tabindex="-1"></a><span class="co">#&gt; 4 А.Д.Кантемир    С.С.Волчков      1 directed</span></span>
<span id="cb84-13"><a href="topology-communities.html#cb84-13" tabindex="-1"></a><span class="co">#&gt; 5 А.Д.Кантемир  И.И.Ильинский      1 directed</span></span>
<span id="cb84-14"><a href="topology-communities.html#cb84-14" tabindex="-1"></a><span class="co">#&gt; 6 А.Д.Кантемир       Ф.Кролик      1 directed</span></span></code></pre></div>
<p>Re-write edges:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="topology-communities.html#cb85-1" tabindex="-1"></a><span class="fu">write.csv</span>(writers,</span>
<span id="cb85-2"><a href="topology-communities.html#cb85-2" tabindex="-1"></a>          <span class="st">&quot;russian.writers_18century.csv&quot;</span>,</span>
<span id="cb85-3"><a href="topology-communities.html#cb85-3" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span></code></pre></div>
<p>Data description:</p>
<blockquote>
<p>Датасет представляет собой осмысленные в терминах сетевого анализа междустатейные ссылки в Словаре русских писателей XVIII века (1988–2010. Вып. 1–3). Узлами сети выступают посвященные персоналиям статьи словаря, а ребрами – ссылки на другие статьи в том же словаре. Такая сеть позволяет проследить ключевые тенденции в социальном и интеллектуальном взаимодействии литераторов XVIII века.</p>
</blockquote>
<blockquote>
<p>По словам составителей: «В биографиях лиц, вошедших в историю гуманитарной культуры в качестве государственных деятелей, церковных и светских ораторов, ученых (экономистов, географов, правоведов, историков, лингвистов и пр.), издателей журналов и газет, публицистов, составителей сборников литературного содержания и вместе с тем попадающих в “Словарь”, выделяются и рассматриваются прежде всего сочинения, так или иначе повлиявшие на развитие художественной литературы» (Словарь русских писателей XVIII века. Принципы составления. Словник / сост. В. П. Степанов. Л.: Наука, 1975. С. 11). Таким образом, связи в построенной на данных Словаря сети отражают <em>взаимодействие агентов в поле русской литературы XVIII века.</em></p>
</blockquote>
<p>Data viz from the authors: <a href="https://nevmenandr.github.io/rus-dict18-persons/#" class="uri">https://nevmenandr.github.io/rus-dict18-persons/#</a></p>
<p>If you want, you can also look in Gephi at the second dataset from the same authors, <code>foreign_EDGES.csv</code>, and compare it with the previous data:</p>
<blockquote>
<p>Узлами сети выступают русские писатели XVIII века, ребрами — общность их обращения к одним и тем же европейским литераторам. &lt;…&gt; Такая сеть позволяет
проследить ключевые тенденции в литературной моде XVIII века. Данные организованы в виде ненаправленного взвешенного графа. Вес ребра означает число общих для данных литераторов упоминаний европейских писателей.</p>
</blockquote>
<p>Link to the data (it contains the readme file): <a href="https://dataverse.pushdom.ru/dataset.xhtml?persistentId=doi:10.31860/openlit-2023.4-B003" class="uri">https://dataverse.pushdom.ru/dataset.xhtml?persistentId=doi:10.31860/openlit-2023.4-B003</a></p>
</div>
</div>
<div id="graph-commons-data" class="section level2 unnumbered">
<h2><strong>Graph Commons data</strong></h2>
<p>For this platform, we need to use different variable names than those required by Gephi. The required renaming is illustrated below with the familiar <code>insna</code> data and the Twin Peaks character network.</p>
<p><em>For nodes’ list:</em></p>
<ul>
<li><p>“Node Type” (to assign color; I do not use it below)</p></li>
<li><p>“Name”</p></li>
<li><p>optional: “Description” and “Image”</p></li>
<li><p>other columns: anything you want</p></li>
</ul>
<p><em>For edges’ list:</em></p>
<ul>
<li><p>“From Type”</p></li>
<li><p>“From Name”</p></li>
<li><p>“Edge Type”</p></li>
<li><p>“To Type”</p></li>
<li><p>“To Name” (“column can have multiple names separated by semicolons for adding multiple connections to these nodes at once.”)</p></li>
<li><p>optional: “Weight”</p></li>
<li><p>other columns: anything you want</p></li>
</ul>
<p>INSNA network:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="topology-communities.html#cb86-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb86-2"><a href="topology-communities.html#cb86-2" tabindex="-1"></a></span>
<span id="cb86-3"><a href="topology-communities.html#cb86-3" tabindex="-1"></a><span class="do">## load:</span></span>
<span id="cb86-4"><a href="topology-communities.html#cb86-4" tabindex="-1"></a>insna <span class="ot">&lt;-</span> networkdata<span class="sc">::</span>insna</span>
<span id="cb86-5"><a href="topology-communities.html#cb86-5" tabindex="-1"></a></span>
<span id="cb86-6"><a href="topology-communities.html#cb86-6" tabindex="-1"></a><span class="do">## calculate centralities:</span></span>
<span id="cb86-7"><a href="topology-communities.html#cb86-7" tabindex="-1"></a><span class="fu">V</span>(insna)<span class="sc">$</span>outdegree <span class="ot">=</span> <span class="fu">degree</span>(insna, <span class="at">mode =</span> <span class="st">&quot;out&quot;</span>)</span>
<span id="cb86-8"><a href="topology-communities.html#cb86-8" tabindex="-1"></a><span class="fu">V</span>(insna)<span class="sc">$</span>totaldegree <span class="ot">=</span> <span class="fu">degree</span>(insna, <span class="at">mode =</span> <span class="st">&quot;total&quot;</span>)</span>
<span id="cb86-9"><a href="topology-communities.html#cb86-9" tabindex="-1"></a></span>
<span id="cb86-10"><a href="topology-communities.html#cb86-10" tabindex="-1"></a><span class="do">## get edgelist and rename columns appropriately for graph commons:</span></span>
<span id="cb86-11"><a href="topology-communities.html#cb86-11" tabindex="-1"></a>insna.edgelist <span class="ot">&lt;-</span> (insna <span class="sc">%&gt;%</span> </span>
<span id="cb86-12"><a href="topology-communities.html#cb86-12" tabindex="-1"></a>   <span class="fu">asDF</span>())<span class="sc">$</span>edge <span class="sc">%&gt;%</span> </span>
<span id="cb86-13"><a href="topology-communities.html#cb86-13" tabindex="-1"></a>  <span class="st">`</span><span class="at">colnames&lt;-</span><span class="st">`</span>(<span class="fu">c</span>(<span class="st">&quot;From Name&quot;</span>, <span class="st">&quot;To Name&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb86-14"><a href="topology-communities.html#cb86-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">From Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;person&quot;</span>,</span>
<span id="cb86-15"><a href="topology-communities.html#cb86-15" tabindex="-1"></a>         <span class="st">`</span><span class="at">Edge Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;teaching&quot;</span>,</span>
<span id="cb86-16"><a href="topology-communities.html#cb86-16" tabindex="-1"></a>         <span class="st">`</span><span class="at">To Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;person&quot;</span>)</span>
<span id="cb86-17"><a href="topology-communities.html#cb86-17" tabindex="-1"></a></span>
<span id="cb86-18"><a href="topology-communities.html#cb86-18" tabindex="-1"></a><span class="do">## get nodelist and rename columns appropriately for graph commons:</span></span>
<span id="cb86-19"><a href="topology-communities.html#cb86-19" tabindex="-1"></a>insna.nodelist <span class="ot">&lt;-</span> (insna <span class="sc">%&gt;%</span> </span>
<span id="cb86-20"><a href="topology-communities.html#cb86-20" tabindex="-1"></a>   <span class="fu">asDF</span>())<span class="sc">$</span>vertex <span class="sc">%&gt;%</span> </span>
<span id="cb86-21"><a href="topology-communities.html#cb86-21" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Name =</span> intergraph_id,</span>
<span id="cb86-22"><a href="topology-communities.html#cb86-22" tabindex="-1"></a>         <span class="at">displayed_name =</span> name) <span class="sc">%&gt;%</span></span>
<span id="cb86-23"><a href="topology-communities.html#cb86-23" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Node Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;person&quot;</span>)</span>
<span id="cb86-24"><a href="topology-communities.html#cb86-24" tabindex="-1"></a></span>
<span id="cb86-25"><a href="topology-communities.html#cb86-25" tabindex="-1"></a><span class="co"># check directory:</span></span>
<span id="cb86-26"><a href="topology-communities.html#cb86-26" tabindex="-1"></a><span class="co">#getwd()</span></span>
<span id="cb86-27"><a href="topology-communities.html#cb86-27" tabindex="-1"></a></span>
<span id="cb86-28"><a href="topology-communities.html#cb86-28" tabindex="-1"></a><span class="co"># save:</span></span>
<span id="cb86-29"><a href="topology-communities.html#cb86-29" tabindex="-1"></a><span class="fu">write.csv</span>(insna.edgelist,</span>
<span id="cb86-30"><a href="topology-communities.html#cb86-30" tabindex="-1"></a>          <span class="st">&quot;GC.insna.edgelist.csv&quot;</span>,</span>
<span id="cb86-31"><a href="topology-communities.html#cb86-31" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span>
<span id="cb86-32"><a href="topology-communities.html#cb86-32" tabindex="-1"></a><span class="fu">write.csv</span>(insna.nodelist,</span>
<span id="cb86-33"><a href="topology-communities.html#cb86-33" tabindex="-1"></a>          <span class="st">&quot;GC.insna.nodelist.csv&quot;</span>,</span>
<span id="cb86-34"><a href="topology-communities.html#cb86-34" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span></code></pre></div>
<p>“Twin peaks”:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="topology-communities.html#cb87-1" tabindex="-1"></a><span class="do">## to read json-files:</span></span>
<span id="cb87-2"><a href="topology-communities.html#cb87-2" tabindex="-1"></a><span class="co"># install.packages(&quot;jsonlite&quot;)</span></span>
<span id="cb87-3"><a href="topology-communities.html#cb87-3" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb87-4"><a href="topology-communities.html#cb87-4" tabindex="-1"></a></span>
<span id="cb87-5"><a href="topology-communities.html#cb87-5" tabindex="-1"></a><span class="co"># clear env:</span></span>
<span id="cb87-6"><a href="topology-communities.html#cb87-6" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb87-7"><a href="topology-communities.html#cb87-7" tabindex="-1"></a></span>
<span id="cb87-8"><a href="topology-communities.html#cb87-8" tabindex="-1"></a><span class="do">## load data:</span></span>
<span id="cb87-9"><a href="topology-communities.html#cb87-9" tabindex="-1"></a>twinpeaks <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">&quot;datasets/Moviegalaxies - Twin Peaks.json&quot;</span>,</span>
<span id="cb87-10"><a href="topology-communities.html#cb87-10" tabindex="-1"></a>                      <span class="at">flatten=</span><span class="cn">TRUE</span>)</span>
<span id="cb87-11"><a href="topology-communities.html#cb87-11" tabindex="-1"></a></span>
<span id="cb87-12"><a href="topology-communities.html#cb87-12" tabindex="-1"></a><span class="do">## edgelist и nodelist:</span></span>
<span id="cb87-13"><a href="topology-communities.html#cb87-13" tabindex="-1"></a>twinpeaks.edges <span class="ot">&lt;-</span> twinpeaks<span class="sc">$</span>network<span class="sc">$</span>edges</span>
<span id="cb87-14"><a href="topology-communities.html#cb87-14" tabindex="-1"></a>twinpeaks.nodes <span class="ot">&lt;-</span> twinpeaks<span class="sc">$</span>network<span class="sc">$</span>nodes</span>
<span id="cb87-15"><a href="topology-communities.html#cb87-15" tabindex="-1"></a></span>
<span id="cb87-16"><a href="topology-communities.html#cb87-16" tabindex="-1"></a><span class="do">## re-naming:</span></span>
<span id="cb87-17"><a href="topology-communities.html#cb87-17" tabindex="-1"></a>twinpeaks.nodes <span class="ot">&lt;-</span> twinpeaks.nodes <span class="sc">%&gt;%</span> </span>
<span id="cb87-18"><a href="topology-communities.html#cb87-18" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>id, <span class="sc">-</span>color) <span class="sc">%&gt;%</span> </span>
<span id="cb87-19"><a href="topology-communities.html#cb87-19" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Name =</span> name) <span class="sc">%&gt;%</span> </span>
<span id="cb87-20"><a href="topology-communities.html#cb87-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Node Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;character&quot;</span>)</span>
<span id="cb87-21"><a href="topology-communities.html#cb87-21" tabindex="-1"></a></span>
<span id="cb87-22"><a href="topology-communities.html#cb87-22" tabindex="-1"></a>twinpeaks.edges <span class="ot">&lt;-</span> twinpeaks.edges <span class="sc">%&gt;%</span> </span>
<span id="cb87-23"><a href="topology-communities.html#cb87-23" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">From Name</span><span class="st">`</span> <span class="ot">=</span> source,</span>
<span id="cb87-24"><a href="topology-communities.html#cb87-24" tabindex="-1"></a>         <span class="st">`</span><span class="at">To Name</span><span class="st">`</span> <span class="ot">=</span> target,</span>
<span id="cb87-25"><a href="topology-communities.html#cb87-25" tabindex="-1"></a>         <span class="at">Weight =</span> weight) <span class="sc">%&gt;%</span> </span>
<span id="cb87-26"><a href="topology-communities.html#cb87-26" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">From Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;character&quot;</span>,</span>
<span id="cb87-27"><a href="topology-communities.html#cb87-27" tabindex="-1"></a>         <span class="st">`</span><span class="at">To Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;character&quot;</span>,</span>
<span id="cb87-28"><a href="topology-communities.html#cb87-28" tabindex="-1"></a>         <span class="st">`</span><span class="at">Edge Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;plot connection&quot;</span>)</span>
<span id="cb87-29"><a href="topology-communities.html#cb87-29" tabindex="-1"></a></span>
<span id="cb87-30"><a href="topology-communities.html#cb87-30" tabindex="-1"></a><span class="co"># save:</span></span>
<span id="cb87-31"><a href="topology-communities.html#cb87-31" tabindex="-1"></a><span class="fu">write.csv</span>(twinpeaks.edges,</span>
<span id="cb87-32"><a href="topology-communities.html#cb87-32" tabindex="-1"></a>          <span class="st">&quot;GC.twinpeaks.edgelist.csv&quot;</span>,</span>
<span id="cb87-33"><a href="topology-communities.html#cb87-33" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span>
<span id="cb87-34"><a href="topology-communities.html#cb87-34" tabindex="-1"></a><span class="fu">write.csv</span>(twinpeaks.nodes,</span>
<span id="cb87-35"><a href="topology-communities.html#cb87-35" tabindex="-1"></a>          <span class="st">&quot;GC.twinpeaks.nodelist.csv&quot;</span>,</span>
<span id="cb87-36"><a href="topology-communities.html#cb87-36" tabindex="-1"></a>          <span class="at">row.names =</span> F)</span></code></pre></div>
<p>More about <em>graph commons</em>: <a href="https://docs.graphcommons.com/" class="uri">https://docs.graphcommons.com/</a></p>
</div>
<div id="cosmograph" class="section level2 unnumbered">
<h2><strong>Cosmograph</strong></h2>
<p>This is a free-to-use online tool from the Russian creators. Way more advanced than the previous tools.</p>
<ul>
<li><p><a href="https://cosmograph.app/docs/cosmograph/How%20to%20Use/">Tutorial</a></p></li>
<li><p><a href="no%20need%20to%20register">Website</a>(<a href="https://cosmograph.app/run/" class="uri">https://cosmograph.app/run/</a>)</p></li>
<li><p><a href="https://t.me/dataviznews">tg-channel of one of the creators</a></p></li>
<li><p><a href="https://cosmograph.app/run/?data=https://data.newsgraph.xyz/4500a184-f5bb-4e7d-a646-bfadd2b0b1db.csv&amp;meta=https://data.newsgraph.xyz/f94dcc4b-705b-46b2-bf14-dcec8dce17e1.csv&amp;source=source&amp;target=target&amp;gravity=0.25&amp;repulsion=1&amp;repulsionTheta=0.75&amp;linkSpring=0.4&amp;linkDistance=10&amp;friction=0.85&amp;renderLabels=true&amp;renderHoveredLabel=true&amp;renderLinks=true&amp;nodeSizeScale=0.7&amp;linkWidthScale=1&amp;linkArrowsSizeScale=1&amp;nodeSize=size-sum-size&amp;nodeColor=color-type&amp;linkWidth=width-avg-size&amp;linkColor=color-avg-size&amp;">Recent example of use</a></p></li>
</ul>
<p>The data format needs:</p>
<ul>
<li><p>edgelist (“source”, “target”) - it is already enough to build the graph, though you can also add columns “time” and “value”</p></li>
<li><p>nodelist = metadata file (“id”, “color”, “size”)</p></li>
</ul>
<p>To put your hands on the program, you can load the files about the connections of Russian writers created above into the program: they are already in the appropriate format (source, target), and therefore no modifications are needed.</p>
</div>
<div id="home-assignment-3" class="section level2 unnumbered">
<h2><strong>Home assignment 3</strong></h2>
<p>Choose a dataset you like ((check <a href="available-datasets.html#available-datasets"><strong>Available datasets</strong></a>) or find a network by yourself), format it appropriately (lists of nodes and edges), and draw the network in Gephi or other software (Graph Commons, Cosmograph). Think about the story you want to tell by showing your network (specific nodes’ positions, network structure, etc.). Feel free to edit the picture using other softwares (if you struggle with captions in Gephi, for example, you can annotate your picture somewhere else).</p>
<p>Insert your graph to pdf/word and write 5-6 sentences about your thought process and story behind the image. Refer to network properties we discussed in class (diameter, homophily, core/peripherical structure) to support your arguments.</p>
<p>If you want to practice more, you can accompany your work with a short report about the most central nodes in the network and/or the structure of the network, including your interpretation of these results.</p>
<p>Deadline: before next class | send to <a href="mailto:aapecherskikh@hse.ru" class="email">aapecherskikh@hse.ru</a></p>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>yet another SNA coursebook</strong>" was written by Arthur Pecherskikh. It was last built on 2025-11-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>4 - two-mode networks | yet another SNA coursebook</title>
<meta name="author" content="Arthur Pecherskikh">
<meta name="description" content="Two-mode networks, or bipartite networks, or affiliation networks (these are used interchangeably sometimes), consist of two distinct sets of nodes, where ties exist only between nodes of...">
<meta name="generator" content="bookdown 0.45 with bs4_book()">
<meta property="og:title" content="4 - two-mode networks | yet another SNA coursebook">
<meta property="og:type" content="book">
<meta property="og:description" content="Two-mode networks, or bipartite networks, or affiliation networks (these are used interchangeably sometimes), consist of two distinct sets of nodes, where ties exist only between nodes of...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="4 - two-mode networks | yet another SNA coursebook">
<meta name="twitter:description" content="Two-mode networks, or bipartite networks, or affiliation networks (these are used interchangeably sometimes), consist of two distinct sets of nodes, where ties exist only between nodes of...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.4/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/d3-4.9.1/d3.min.js"></script><script src="libs/forceNetwork-binding-0.4.1/forceNetwork.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">yet another SNA coursebook</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About</a></li>
<li><a class="" href="formalities.html">Formalities</a></li>
<li><a class="" href="course-outline.html">Course outline</a></li>
<li class="book-part">Seminars</li>
<li><a class="" href="intro.html">1 - intro</a></li>
<li><a class="" href="centrality-measures.html">2 - centrality measures</a></li>
<li><a class="" href="topology-communities.html">3 - topology &amp; communities</a></li>
<li><a class="active" href="two-mode-networks.html">4 - two-mode networks</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="available-datasets.html">Available datasets</a></li>
<li><a class="" href="intro-to-web-scraping.html">Intro to web-scraping</a></li>
<li><a class="" href="recommended-literature.html">Recommended literature</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/artpech23/sna-for-hse-master-students2025">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="two-mode-networks" class="section level1 unnumbered">
<h1>
<strong>4 - two-mode networks</strong><a class="anchor" aria-label="anchor" href="#two-mode-networks"><i class="fas fa-link"></i></a>
</h1>
<p>Two-mode networks, or bipartite networks, or affiliation networks (these are used interchangeably sometimes), consist of <strong>two distinct sets of nodes, where ties exist only between nodes of different sets</strong> (e.g., people and events, authors and papers). This structure is particularly useful for representing affiliations, co-occurrences, or memberships, while preserving the relationships between these categories. Unlike one-mode networks, analyzing two-mode networks requires specialized workflows and metrics to account for their unique structure. In this session, we will walk through the steps of construction, vizualization, and analysis of a two-mode network.</p>
<p>If you want to consult the other sources, check:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://toreopsahl.com/tnet/two-mode-networks/projection/" style="color: blue;">this discussion of projections</a>,</p></li>
<li><p><a href="https://rpubs.com/pjmurphy/317838" style="color: blue;">this</a> or <a href="https://schochastics.github.io/R4SNA/two-mode-networks.html" style="color: blue;">that</a> pages with the workflow in R. Partially, we will take a look at the data from the first source below.</p></li>
</ol>
<p>Today’s lecture slides are available <a href="https://docs.google.com/presentation/d/1a7bgijjxv3r3-VjLjCoCmrf1wtlbZZpM9b3xtZGFD58/edit?usp=sharing" style="color: blue;">here</a>.</p>
<p>Libraries for this session:</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>    <span class="co">## general workflow</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>      <span class="co">## general for vizualizations </span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r.igraph.org/">igraph</a></span><span class="op">)</span>       <span class="co">## core package to work with networks</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://mbojan.github.io/intergraph/">intergraph</a></span><span class="op">)</span>   <span class="co">## to convert graphs to data frames and back</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stocnet.github.io/manynet/">manynet</a></span><span class="op">)</span>      <span class="co">## data package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/schochastics/netUtils/">netUtils</a></span><span class="op">)</span>     <span class="co">## to compute network statistics</span></span>
<span></span>
<span><span class="co"># for `networkdata` package:</span></span>
<span><span class="co">#install.packages("remotes")</span></span>
<span><span class="co">#remotes::install_github("schochastics/networkdata")</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/schochastics/networkdata">networkdata</a></span><span class="op">)</span>  <span class="co">## exteremely large library! take time to install in once</span></span>
<span></span>
<span><span class="co">#install.packages("oaqc")</span></span>
<span><span class="co">#library(oaqc)         ## for more layouts</span></span>
<span><span class="co">#library(graphlayouts) ## for more layouts</span></span>
<span></span>
<span><span class="co">#install.packages("tnet")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://toreopsahl.com/tnet/">tnet</a></span><span class="op">)</span>         <span class="co">## to analyze 2-mode networks without projections</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggrepel.slowkow.com/">ggrepel</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span></code></pre></div>
<hr>
<div id="basic-example" class="section level2 unnumbered">
<h2>
<strong>Basic example</strong><a class="anchor" aria-label="anchor" href="#basic-example"><i class="fas fa-link"></i></a>
</h2>
<p>The data for the first part of today’s session comes from the famous study conducted by Davis and his colleagues (1941). It represents attendance data from 14 social events hosted by 18 women in the American South during the 1930s. This bipartite network captures the <em>affiliations between women and events</em>, highlighting patterns of social interaction, group formation, and shared affiliations. It is a classical dataset to tell students about the two-mode network analysis.</p>
<p>This data is available via the <code>networkdata</code> package that you should already be aware of. Just in case, this same dataset (in .RData extension) is attached to the zip-folder available via <a href="https://drive.google.com/drive/folders/1etPj5Sr1oF6k5EuyL2c30O-gV_4uZ81f" style="color: blue;">our google drive folder</a>.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ?southern_women # - to know more aboout the data</span></span>
<span></span>
<span><span class="co">## get data from `networkdata`:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## save data for it to be available to you</span></span>
<span><span class="co">#save.image("southern_women.RData")</span></span>
<span></span>
<span><span class="co">## load this same data back:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"datasets/southern_women.RData"</span><span class="op">)</span></span>
<span><span class="va">southern_women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; -----------------------------------------------------------</span></span>
<span><span class="co">#&gt; UNNAMED NETWORK (undirected, unweighted, two-mode network)</span></span>
<span><span class="co">#&gt; -----------------------------------------------------------</span></span>
<span><span class="co">#&gt; Nodes: 32, Edges: 89, Density: 0.1794, Components: 1,</span></span>
<span><span class="co">#&gt; Isolates: 0</span></span>
<span><span class="co">#&gt; -Vertex Attributes:</span></span>
<span><span class="co">#&gt;  type(l): FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...</span></span>
<span><span class="co">#&gt;  name(c): EVELYN, LAURA, THERESA, BRENDA, CHARLOTTE, ...</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; -Edges (first 10): </span></span>
<span><span class="co">#&gt;  EVELYN--6/27 EVELYN--3/2 EVELYN--4/12 EVELYN--9/26</span></span>
<span><span class="co">#&gt; EVELYN--2/25 EVELYN--5/19 EVELYN--9/16 EVELYN--4/8</span></span>
<span><span class="co">#&gt; LAURA--6/27 LAURA--3/2</span></span></code></pre></div>
<p>By looking at this data structure, you should note several things:</p>
<ol style="list-style-type: decimal">
<li><p>types of nodes (women and events) are not differentiated when counting the number of nodes.</p></li>
<li><p>However, there is a nodes’ attribute “type” which specifies whether a node is an event or a women. When you create a graph with the two-mode organization by yourself, <code>igraph</code> would not recognize its special nature unless you provide this variable, “type”, in the nodes’ list.</p></li>
</ol>
<p>Let’s try to plot this graph to get a better sense of two-mode networks:</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#asDF(southern_women) - run to see how people are distinguished from events</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">southern_women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label.cex <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>       vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"coral1"</span>,</span>
<span>                             <span class="st">"darkblue"</span><span class="op">)</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"square"</span>,</span>
<span>                             <span class="st">"circle"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-3-1.png" width="672"></div>
<p><code>igraph</code> includes some fancy network layouts which can look pretty when dealing with two-mode networks. These examples also show you how to excel at network visualizations in R:</p>
<ol style="list-style-type: decimal">
<li><p>we remove nodes’ captions to simplify the picture,</p></li>
<li><p>we code the types of nodes using colors and shapes together,</p></li>
<li><p>we change layouts each time to see whether the network structure is presented intuitively clear,</p></li>
<li><p>finally, we add titles so that the layout applied is shown.</p></li>
</ol>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">southern_women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"coral1"</span>,</span>
<span>                             <span class="st">"darkblue"</span><span class="op">)</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"square"</span>,</span>
<span>                             <span class="st">"circle"</span><span class="op">)</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_as_bipartite.html">layout_as_bipartite</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span>,</span>
<span>       main <span class="op">=</span> <span class="st">"layout_as_bipartite()"</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">southern_women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"coral1"</span>,</span>
<span>                             <span class="st">"darkblue"</span><span class="op">)</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"square"</span>,</span>
<span>                             <span class="st">"circle"</span><span class="op">)</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_nicely.html">layout_nicely</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span>,</span>
<span>       main <span class="op">=</span> <span class="st">"layout_nicely()"</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">southern_women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"coral1"</span>,</span>
<span>                             <span class="st">"darkblue"</span><span class="op">)</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"square"</span>,</span>
<span>                             <span class="st">"circle"</span><span class="op">)</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_in_circle.html">layout_in_circle</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span>,</span>
<span>       main <span class="op">=</span> <span class="st">"layout_in_circle()"</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">southern_women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"coral1"</span>,</span>
<span>                             <span class="st">"darkblue"</span><span class="op">)</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">FALSE</span>,</span>
<span>                             <span class="st">"square"</span>,</span>
<span>                             <span class="st">"circle"</span><span class="op">)</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_with_mds.html">layout_with_mds</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span>,</span>
<span>       main <span class="op">=</span> <span class="st">"layout_with_mds()"</span><span class="op">)</span> </span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-4-1.png" width="576"></div>
<p>Probably, the core message in-scripted in these pictures is the presence of two types of nodes and the exclusive attachment of dissimilar nodes to each other. Again, these are the core features of the two-mode networks, and they bound the range of techniques we can apply to study this graph.</p>
<p>Theoretically, we have 3 options:</p>
<ol style="list-style-type: decimal">
<li><p>proceed as usual, and apply typical one-mode measures to the two-mode network</p></li>
<li><p>analyze each mode separately using two-mode metrics</p></li>
<li><p>convert the two-Mode network into two projections (i.e., a network of women and a network of events, where the ties correspond to the omitted type of nodes) and analyze them both as the usual one-mode networks.</p></li>
</ol>
<p>The first approach involves treating the two-mode network as-is and applying standard metrics like degree centrality, betweenness centrality, and closeness centrality directly to the bipartite structure. While familiar and straightforward, this strategy may overlook nuances specific to the two-mode context, as <em>many of these measures assume homogeneity among nodes</em>. For example, computing degree centrality can highlight which women attended the most events and which events had the highest participation, meanwhile writing these centrality values into a single column. This last obstacle can puzzle us once the networks get larger and some of the second-order nodes receive too many connections. To put shortly, the comparison of the centralities of these two types of nodes might be misleading. And <em>it gets worse with other measures</em>, and degree centrality, as the simpliest version of centrality, is an only real option to calculate (even with the difficulties just metioned).</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">southern_women</span>,</span>
<span>                                  mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span> <span class="co">## note that affiliation networks cannot be directed, in a sense, as well as its projections</span></span>
<span></span>
<span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">southern_women</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">vertex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">intergraph_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="cn">F</span>,</span>
<span>                       <span class="st">"women"</span>,</span>
<span>                       <span class="st">"event"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">degree</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table" style="color: black; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
type
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
degree
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
event
</td>
<td style="text-align:left;">
9/16
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
event
</td>
<td style="text-align:left;">
4/8
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
event
</td>
<td style="text-align:left;">
3/15
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
women
</td>
<td style="text-align:left;">
EVELYN
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
women
</td>
<td style="text-align:left;">
THERESA
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
women
</td>
<td style="text-align:left;">
NORA
</td>
<td style="text-align:right;">
8
</td>
</tr>
</tbody>
</table></div>
<p>The code from above computes the degree centrality scores (nothing new to you) and produce a table with the nodes of each class which possess the highest degree values. It should be interpreted as “Evelyn attended 8 events”, or “event on 16th of September was attended by 14 women (all who are present in the data attended it)”.</p>
<p>The second option we have is to apply metrics developed specifically for two-mode networks. They allow researchers to investigate each set of nodes individually while preserving their connections to the other set. For instance, bipartite density measures the proportion of possible ties in the network, while metrics like two-mode clustering coefficients examine how groups form across the sets. <strong>Analyzing modes separately ensures that the unique nature of bipartite ties is not lost.</strong></p>
<p>Unfortunately for us, this line of the possible workflows is not currently well-developed for R. The only available reliable package we have at the moment is <code>tnet</code> developed by <a href="https://toreopsahl.com/" style="color: blue;">Tore Opsahl</a>. We would not cover it today (although, you can consult external sources on <code>tnet</code> or work in the other softwares, like Pajek, to work in this style).</p>
<p>The third option is the one we focus on below. It implies a common strategy to project the two-mode network onto one or both sets of nodes, resulting in one-mode networks. <strong>In the projection, nodes from one set are connected if they share a common neighbor in the other set.</strong> For example, women could be connected if they attended the same event, or events could be connected if they were attended by the same women. This approach facilitates the use of standard one-mode network analysis tools but <strong>risks introducing bias, as projections often inflate edge weights and lose important bipartite context.</strong> Careful interpretation is required to avoid overestimating connectivity.</p>
<p>The simplest way to get the projections is to multiply two-mode matrice to its transposed version (i.e., the matrix where rows become columns and columns become rows). This is a way to get one of the one-mode networks, or projections. Once we change the order of multiplication, we get the second desired one-mode network. The code below shows these steps in details:</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## 1. get the matrix:</span></span>
<span></span>
<span><span class="co">#(southern_women %&gt;%</span></span>
<span><span class="co">#  as_biadjacency_matrix())[1:6, 1:6] ## - to check if everything is correct</span></span>
<span></span>
<span><span class="va">bimod.matrix</span> <span class="op">&lt;-</span> <span class="va">southern_women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/as_biadjacency_matrix.html">as_biadjacency_matrix</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## 2. get the projections by matrices multiplications:</span></span>
<span></span>
<span><span class="va">women_matrix</span> <span class="op">&lt;-</span> <span class="va">bimod.matrix</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">bimod.matrix</span><span class="op">)</span></span>
<span><span class="va">event_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">bimod.matrix</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="va">bimod.matrix</span></span>
<span><span class="co">## the order of multiplication is important!</span></span>
<span></span>
<span><span class="co">## remove the artificial loops:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">women_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">event_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="co">## 3. structure of the new one-mode women network:</span></span>
<span><span class="va">women_matrix</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/graph_from_adjacency_matrix.html">graph_from_adjacency_matrix</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"undirected"</span><span class="op">)</span></span>
<span><span class="co">#&gt; IGRAPH 1c086d1 UN-- 18 322 -- </span></span>
<span><span class="co">#&gt; + attr: name (v/c)</span></span>
<span><span class="co">#&gt; + edges from 1c086d1 (vertex names):</span></span>
<span><span class="co">#&gt;  [1] EVELYN--LAURA     EVELYN--LAURA     EVELYN--LAURA    </span></span>
<span><span class="co">#&gt;  [4] EVELYN--LAURA     EVELYN--LAURA     EVELYN--LAURA    </span></span>
<span><span class="co">#&gt;  [7] EVELYN--THERESA   EVELYN--THERESA   EVELYN--THERESA  </span></span>
<span><span class="co">#&gt; [10] EVELYN--THERESA   EVELYN--THERESA   EVELYN--THERESA  </span></span>
<span><span class="co">#&gt; [13] EVELYN--THERESA   EVELYN--BRENDA    EVELYN--BRENDA   </span></span>
<span><span class="co">#&gt; [16] EVELYN--BRENDA    EVELYN--BRENDA    EVELYN--BRENDA   </span></span>
<span><span class="co">#&gt; [19] EVELYN--BRENDA    EVELYN--CHARLOTTE EVELYN--CHARLOTTE</span></span>
<span><span class="co">#&gt; [22] EVELYN--CHARLOTTE EVELYN--FRANCES   EVELYN--FRANCES  </span></span>
<span><span class="co">#&gt; + ... omitted several edges</span></span></code></pre></div>
<p>As seen from the structure of the women network (one-mode projection) given above, we indeed shifted to the networks with the simple and supposedly easy to work with structure (one-mode).</p>
<p>We can now plot these two networks:</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## get igraph objects:</span></span>
<span><span class="va">g.women</span> <span class="op">&lt;-</span> <span class="va">women_matrix</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/graph_from_adjacency_matrix.html">graph_from_adjacency_matrix</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"undirected"</span>,</span>
<span>                              weighted <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">g.events</span> <span class="op">&lt;-</span> <span class="va">event_matrix</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/graph_from_adjacency_matrix.html">graph_from_adjacency_matrix</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"undirected"</span>,</span>
<span>                              weighted <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## calculate simple centralities:</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">g.women</span>, mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.events</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">g.events</span>, mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## plotting:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g.women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label.cex <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>       vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>       vertex.size <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="st">"coral1"</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="st">"square"</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_with_dh.html">layout_with_dh</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span>,</span>
<span>       main <span class="op">=</span> <span class="st">"women projection"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g.events</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label.cex <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>       vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>       vertex.size <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.events</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="st">"darkblue"</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="st">"circle"</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_with_dh.html">layout_with_dh</a></span><span class="op">(</span><span class="va">g.events</span><span class="op">)</span>,</span>
<span>       main <span class="op">=</span> <span class="st">"events projection"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
<p>We can compute centrality values for both sets of nodes (women and events):</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">g.women</span>, mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">betweenness.score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/betweenness.html">betweenness</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">closeness.score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/closeness.html">closeness</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="va">g.women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">vertex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">degree</span>, <span class="va">betweenness.score</span>, <span class="va">closeness.score</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>betweenness.score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">betweenness.score</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>         closeness.score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">closeness.score</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">betweenness.score</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table" style="color: black; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
degree
</th>
<th style="text-align:right;">
betweenness.score
</th>
<th style="text-align:right;">
closeness.score
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
OLIVIA
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
18.53
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
FLORA
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
18.53
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
DOROTHY
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
13.02
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
HELEN
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
8.39
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
FRANCES
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
7.87
</td>
<td style="text-align:right;">
0.04
</td>
</tr>
<tr>
<td style="text-align:left;">
MYRNA
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
7.31
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
KATHERINE
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
7.31
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
VERNE
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
2.51
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
SYLVIA
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
2.51
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
CHARLOTTE
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
2.08
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
NORA
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
1.49
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
ELEANOR
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.62
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
LAURA
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.45
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
BRENDA
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.45
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
EVELYN
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
THERESA
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
PEARL
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
RUTH
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
</tbody>
</table></div>
<p>By contrast, we can use <code>tnet</code> package to compute weighted centrality scores. To do that, we firstly need to convert our matrix to <code>tnet</code> format.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">women_tnet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tnet/man/as.tnet.html">as.tnet</a></span><span class="op">(</span><span class="va">women_matrix</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tnet_degree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tnet/man/degree_w.html">degree_w</a></span><span class="op">(</span><span class="va">women_tnet</span><span class="op">)</span></span>
<span><span class="va">tnet_betweenness</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tnet/man/betweenness_w.html">betweenness_w</a></span><span class="op">(</span><span class="va">women_tnet</span><span class="op">)</span></span>
<span><span class="va">tnet_closeness</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tnet/man/closeness_w.html">closeness_w</a></span><span class="op">(</span><span class="va">women_tnet</span>,</span>
<span>                              gconly <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">southern_women_compare</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">women_matrix</span><span class="op">)</span>,</span>
<span>  weighted_degree <span class="op">=</span> <span class="va">tnet_degree</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>,</span>
<span>  weighted_betweenness <span class="op">=</span> <span class="va">tnet_betweenness</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>,</span>
<span>  weighted_closeness <span class="op">=</span> <span class="va">tnet_closeness</span><span class="op">[</span>,<span class="fl">3</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">vertex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">intergraph_id</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">southern_women_compare</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table" style="color: black; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
weighted_degree
</th>
<th style="text-align:right;">
weighted_betweenness
</th>
<th style="text-align:right;">
weighted_closeness
</th>
<th style="text-align:right;">
degree
</th>
<th style="text-align:right;">
betweenness.score
</th>
<th style="text-align:right;">
closeness.score
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
EVELYN
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
4.5000000
</td>
<td style="text-align:right;">
1.2926019
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0.0909091
</td>
<td style="text-align:right;">
0.0294118
</td>
</tr>
<tr>
<td style="text-align:left;">
LAURA
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.3333333
</td>
<td style="text-align:right;">
1.2315491
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.4523810
</td>
<td style="text-align:right;">
0.0285714
</td>
</tr>
<tr>
<td style="text-align:left;">
THERESA
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
34.3333333
</td>
<td style="text-align:right;">
1.4575448
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0.0909091
</td>
<td style="text-align:right;">
0.0263158
</td>
</tr>
<tr>
<td style="text-align:left;">
BRENDA
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
1.5000000
</td>
<td style="text-align:right;">
1.2569419
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.4523810
</td>
<td style="text-align:right;">
0.0285714
</td>
</tr>
<tr>
<td style="text-align:left;">
CHARLOTTE
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.8642842
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
2.0833333
</td>
<td style="text-align:right;">
0.0285714
</td>
</tr>
<tr>
<td style="text-align:left;">
FRANCES
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.9477175
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
7.8690476
</td>
<td style="text-align:right;">
0.0357143
</td>
</tr>
</tbody>
</table></div>
<p>We can compare the values we got from two approaches. The values are different when plotting two types of betweenness against each other.</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#southern_women_compare %&gt;% </span></span>
<span><span class="co">#  ggplot(aes(degree, weighted_degree)) +</span></span>
<span><span class="co">#  geom_point() ## values are similar</span></span>
<span></span>
<span><span class="va">southern_women_compare</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">betweenness.score</span>, <span class="va">weighted_betweenness</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html">geom_text_repel</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">name</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-10-1.png" width="672"></div>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#southern_women_compare %&gt;% </span></span>
<span><span class="co">#  ggplot(aes(closeness.score, weighted_closeness)) +</span></span>
<span><span class="co">#  geom_point()</span></span></code></pre></div>
<p>Actors with the highest scores:</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g.women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label.cex <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>       vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>       <span class="co">#vertex.size = V(g.women)$betweenness.score,</span></span>
<span>       vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"OLIVIA"</span>, <span class="st">"FLORA"</span><span class="op">)</span>,</span>
<span>                             <span class="st">"coral1"</span>,</span>
<span>                             <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"NORA"</span>, <span class="st">"THERESA"</span><span class="op">)</span>,</span>
<span>                                    </span>
<span>                                    <span class="st">"lightblue"</span>,</span>
<span>                                    <span class="st">"grey60"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>       vertex.size <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span><span class="op">*</span><span class="fl">1.5</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="st">"square"</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_nicely.html">layout_nicely</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-11-1.png" width="672"></div>
<p>Communities in the women projection:</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/cluster_louvain.html">cluster_louvain</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">cl</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/communities.html">membership</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g.women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label.cex <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>       vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>       <span class="co">#vertex.size = V(g.women)$betweenness.score,</span></span>
<span>       vertex.size <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span><span class="op">*</span><span class="fl">1.5</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">$</span><span class="va">cl</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>                             <span class="st">"coral1"</span>,</span>
<span>                             <span class="st">"lightblue"</span><span class="op">)</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="st">"square"</span>,</span>
<span>       layout <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_nicely.html">layout_nicely</a></span><span class="op">(</span><span class="va">g.women</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-12-1.png" width="672"></div>
<p>And in the matrix form (we will analyze next time):</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">blockmodeling</span><span class="op">)</span></span>
<span></span>
<span><span class="va">class2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/blockmodeling/man/optRandomParC.html">optRandomParC</a></span><span class="op">(</span>M<span class="op">=</span><span class="va">women_matrix</span>,</span>
<span>                        k <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                        rep <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                        approach<span class="op">=</span><span class="st">"ss"</span>,</span>
<span>                        blocks<span class="op">=</span><span class="st">"com"</span>,</span>
<span>                        printRep <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Optimization of all partitions completed</span></span>
<span><span class="co">#&gt; 1 solution(s) with minimal error = 392.3794 found.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">class2</span>, main <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-13-1.png" width="672"></div>
</div>
<div id="dimensionality-reduction" class="section level2 unnumbered">
<h2>
<strong>Dimensionality reduction</strong><a class="anchor" aria-label="anchor" href="#dimensionality-reduction"><i class="fas fa-link"></i></a>
</h2>
<p>Dimensionality Reduction refers to the process of reducing the number of variables or dimensions in a dataset while retaining as much meaningful information as possible. This is particularly useful in exploratory data analysis, visualization, and machine learning when high-dimensional data becomes challenging to interpret or analyze.</p>
<p>Correspondence Analysis (CA) is a dimensionality reduction method designed for visualizing the relationships between rows and columns in a contingency table. By decomposing the chi-squared statistic of the table, it projects the data onto a lower-dimensional space, revealing patterns and associations. CA has a natural connection to the analysis of two-mode networks, as it provides a powerful framework for understanding relationships between two distinct sets of entities, much like bipartite networks.</p>
<p>Computation and the variation explained:</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">southern_women2</span> <span class="op">&lt;-</span> <span class="va">southern_women</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/as_biadjacency_matrix.html">as_biadjacency_matrix</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame.matrix</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## 18 rows = women, 14 columns = events</span></span>
<span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.carme-n.org/">ca</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.sthda.com/english/rpkgs/factoextra">factoextra</a></span><span class="op">)</span></span>
<span><span class="co">## perform correspondence analysis</span></span>
<span><span class="va">res.ca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ca/man/ca.html">ca</a></span><span class="op">(</span><span class="va">southern_women2</span>, graph <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## plot with the variance explained by each dimension:</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/eigenvalue.html">fviz_eig</a></span><span class="op">(</span><span class="va">res.ca</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-14-1.png" width="672"></div>
<p>Plotting:</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">women.profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/get_ca.html">get_ca_row</a></span><span class="op">(</span><span class="va">res.ca</span><span class="op">)</span></span>
<span><span class="va">events.profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/get_ca.html">get_ca_col</a></span><span class="op">(</span><span class="va">res.ca</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">women.profiles</span><span class="op">$</span><span class="va">coord</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>,</span>
<span>         type <span class="op">=</span> <span class="st">"people"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">events.profiles</span><span class="op">$</span><span class="va">coord</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>,</span>
<span>                     type <span class="op">=</span> <span class="st">"events"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">Dim.1</span>, <span class="va">Dim.2</span>, color <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html">geom_text_repel</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">name</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"darkblue"</span>, <span class="st">"coral1"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-15-1.png" width="672"></div>
</div>
<div id="clustering-a-two-mode-network-on-cultural-tastes-and-leisure-activities" class="section level2 unnumbered">
<h2>
<strong>Clustering a two-mode network on cultural tastes and leisure activities</strong><a class="anchor" aria-label="anchor" href="#clustering-a-two-mode-network-on-cultural-tastes-and-leisure-activities"><i class="fas fa-link"></i></a>
</h2>
<p>This data was collected by the group of sociology students who attended the course on “Culture and Inequality” during the spring of 2025. The goal here was to map the respondents’ perception of association between the jobs / professions and cultural preferences. The whole research strategy is inspired by:</p>
<blockquote>
<p>Boltanski, L., &amp; Thévenot, L. (1983). Finding one’s way in social space: a study based on games. Social science information, 22(4-5), 631-680.</p>
</blockquote>
<p>This is an on-going project, so it is just the slice of the data. Apologies that it is in Russian.</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cultural.choices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html">fread</a></span><span class="op">(</span><span class="st">"datasets/cultural.choices_table.csv"</span><span class="op">)</span></span></code></pre></div>
<p>First, we need to consturct a graph object:</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="va">cultural.choices</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">cultural_choice</span>, <span class="va">occupation_card</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">graph_from_data_frame</a></span><span class="op">(</span>directed <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">edge</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">V1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">vertex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>V1 <span class="op">=</span> <span class="va">intergraph_id</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"choice"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>intergraph_id <span class="op">=</span> <span class="va">V1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">edge</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">V2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">vertex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>V2 <span class="op">=</span> <span class="va">intergraph_id</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"occupation"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>intergraph_id <span class="op">=</span> <span class="va">V2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="va">cultural.choices</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">cultural_choice</span>, <span class="va">occupation_card</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">graph_from_data_frame</a></span><span class="op">(</span>directed <span class="op">=</span> <span class="cn">F</span>,</span>
<span>                        vertices <span class="op">=</span> <span class="va">nodelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">intergraph_id</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">g</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>       vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"choice"</span>,</span>
<span>                             <span class="st">"coral1"</span>,</span>
<span>                             <span class="st">"lightblue"</span><span class="op">)</span>,</span>
<span>       vertex.shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"choice"</span>,</span>
<span>                             <span class="st">"circle"</span>,</span>
<span>                             <span class="st">"square"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-18-1.png" width="672"></div>
<p>Community detection:</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="va">g</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/cluster_fast_greedy.html">cluster_fast_greedy</a></span><span class="op">(</span>weights <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/E.html">E</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span> </span>
<span></span>
<span>  <span class="co">#membership() %&gt;% </span></span>
<span>  <span class="co">#sizes()</span></span>
<span><span class="va">cl</span></span>
<span><span class="co">#&gt; IGRAPH clustering fast greedy, groups: 4, mod: 0.29</span></span>
<span><span class="co">#&gt; + groups:</span></span>
<span><span class="co">#&gt;   $`1`</span></span>
<span><span class="co">#&gt;    [1] "бывали на каникулах в италии"                      </span></span>
<span><span class="co">#&gt;    [2] "были в мариинском театре в прошлом месяце"         </span></span>
<span><span class="co">#&gt;    [3] "живут на петроградке"                              </span></span>
<span><span class="co">#&gt;    [4] "знают французский"                                 </span></span>
<span><span class="co">#&gt;    [5] "покупают в среднем две книги в месяц"              </span></span>
<span><span class="co">#&gt;    [6] "придерживаются оппозиционных политических взглядов"</span></span>
<span><span class="co">#&gt;    [7] "смотрят фестивальное кино"                         </span></span>
<span><span class="co">#&gt;    [8] "старше 60 лет"                                     </span></span>
<span><span class="co">#&gt;    [9] "артист оркестра"                                   </span></span>
<span><span class="co">#&gt;   + ... omitted several groups/vertices</span></span></code></pre></div>
<p>Table with clusters:</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">fast.greedy.cl</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/communities.html">membership</a></span><span class="op">(</span><span class="va">cl</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">vertex</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">type</span>, <span class="va">fast.greedy.cl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>members <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/toString.html">toString</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"type"</span>,</span>
<span>              values_from <span class="op">=</span> <span class="st">"members"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>`fast-greedy cluster` <span class="op">=</span> <span class="va">fast.greedy.cl</span>,</span>
<span>         choices <span class="op">=</span> <span class="va">choice</span>,</span>
<span>         occupations <span class="op">=</span> <span class="va">occupation</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span><span class="co">#&gt;   `fast-greedy cluster` choices                  occupations</span></span>
<span><span class="co">#&gt;   &lt;membrshp&gt;            &lt;chr&gt;                    &lt;chr&gt;      </span></span>
<span><span class="co">#&gt; 1 1                     бывали на каникулах в и… артист орк…</span></span>
<span><span class="co">#&gt; 2 2                     были на спортивном матч… повар, про…</span></span>
<span><span class="co">#&gt; 3 3                     носят натуральную дубле… агент по н…</span></span>
<span><span class="co">#&gt; 4 4                     вегетарианцы, ежедневно… администра…</span></span>
<span></span>
<span><span class="co">#as_image(width = 8, height = 20) -- other option</span></span>
<span><span class="co">#install.packages("webshot2")</span></span>
<span><span class="co">#install.packages("magick")</span></span></code></pre></div>
<p>Overview from Gephi:</p>
<div class="inline-figure"><img src="images/graph_fast-greedy_cl2.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="case-study-interlocking-editors-in-russian-sociology" class="section level2 unnumbered">
<h2>
<strong>Case study: interlocking editors in Russian sociology</strong><a class="anchor" aria-label="anchor" href="#case-study-interlocking-editors-in-russian-sociology"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Read more about the data <a href="https://github.com/artpech23/russian_sociology_abstracts.sequel" style="color: blue;">here</a>.</p>
<p>load data:</p>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vertices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"datasets/journals_nodes.csv"</span><span class="op">)</span></span>
<span><span class="va">edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"datasets/journals_edges.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"datasets/2mode_journals.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">edges</span><span class="op">)</span></span></code></pre></div>
<p>Get projections:</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##########################################</span></span>
<span><span class="co">## get bimodal network and projections: ##</span></span>
<span><span class="co">##########################################</span></span>
<span></span>
<span><span class="va">two.mode</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">graph_from_data_frame</a></span><span class="op">(</span><span class="va">mode2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                                    <span class="co">## get unique journal-editor couples:</span></span>
<span>                                    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">journal_name</span>, </span>
<span>                                          <span class="va">unified_name</span><span class="op">)</span>,</span>
<span>                                  directed <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## assign bipartite mapping:</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">two.mode</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/bipartite_mapping.html">bipartite_mapping</a></span><span class="op">(</span><span class="va">two.mode</span><span class="op">)</span><span class="op">$</span><span class="va">type</span></span>
<span></span>
<span><span class="co">## extract projections:</span></span>
<span><span class="va">bipartite_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/as_biadjacency_matrix.html">as_biadjacency_matrix</a></span><span class="op">(</span><span class="va">two.mode</span><span class="op">)</span></span>
<span></span>
<span><span class="va">journal_matrix</span> <span class="op">&lt;-</span> <span class="va">bipartite_matrix</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">bipartite_matrix</span><span class="op">)</span></span>
<span><span class="va">people_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">bipartite_matrix</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="va">bipartite_matrix</span></span>
<span></span>
<span><span class="co">## create journals' projection:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">journal_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">people_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="va">g_journals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/graph_from_adjacency_matrix.html">graph_from_adjacency_matrix</a></span><span class="op">(</span><span class="va">journal_matrix</span>,</span>
<span>                                          mode <span class="op">=</span> <span class="st">"undirected"</span>,</span>
<span>                                          weighted <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">g_people</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/graph_from_adjacency_matrix.html">graph_from_adjacency_matrix</a></span><span class="op">(</span><span class="va">people_matrix</span>,</span>
<span>                                          mode <span class="op">=</span> <span class="st">"undirected"</span>,</span>
<span>                                          weighted <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">bipartite_matrix</span>, <span class="va">journal_matrix</span>, <span class="va">two.mode</span><span class="op">)</span></span></code></pre></div>
<p>Central editors:</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_people</span><span class="op">)</span><span class="op">$</span><span class="va">totaldegree</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">g_people</span>, mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_people</span><span class="op">)</span><span class="op">$</span><span class="va">betweenness.score</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/betweenness.html">betweenness</a></span><span class="op">(</span><span class="va">g_people</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#(asDF(g_people))$vertex %&gt;% </span></span>
<span><span class="co">#  arrange(desc(totaldegree))</span></span>
<span></span>
<span><span class="co">## better way:</span></span>
<span><span class="va">mode2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">journal_name</span>, <span class="va">unified_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">unified_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span><span class="op">(</span><span class="fl">7</span>, <span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table" style="color: black; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
unified_name
</th>
<th style="text-align:right;">
n
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
зубок юлия альбертовна
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
голенкова зинаида тихоновна
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
тощенко жан терентьевич
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
горшков михаил константинович
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
черныш михаил федорович
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
ивченков сергей григорьевич
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
каменева татьяна николаевна
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
омельченко елена леонидовна
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
погосян геворк арамович
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
скворцов николай генрихович
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
ярская-смирнова елена ростиславовна
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table></div>
<p>Central journals:</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##############################</span></span>
<span><span class="co">## get degree centralities: ## </span></span>
<span><span class="co">##############################</span></span>
<span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">g_journals</span>, mode <span class="op">=</span> <span class="st">"total"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## preview the most central journals:</span></span>
<span><span class="op">(</span><span class="va">g_journals</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">vertexes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">intergraph_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table" style="color: black; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
degree
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
социологические исследования
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
журнал социологии и социальной антропологии
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
научный результат. социология и управление
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
теория и практика общественного развития
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
поиск: политика. обществоведение. искусство. социология. культура
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
социология
</td>
<td style="text-align:right;">
22
</td>
</tr>
</tbody>
</table></div>
<p>Journal communities:</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##########################</span></span>
<span><span class="co">## community detection: ##</span></span>
<span><span class="co">##########################</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">cl3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/cluster_louvain.html">cluster_louvain</a></span><span class="op">(</span><span class="va">g_journals</span>,</span>
<span>                       resolution <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">$</span><span class="va">cl3</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/communities.html">membership</a></span><span class="op">(</span><span class="va">cl3</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#asDF(g_journals)</span></span>
<span></span>
<span><span class="co">## solution preview:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">g_journals</span>,</span>
<span>     vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">$</span><span class="va">cl3</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>                           <span class="st">"#988F2A"</span>,</span>
<span>                           <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">$</span><span class="va">cl3</span> <span class="op">==</span> <span class="fl">2</span>,</span>
<span>                                  <span class="st">"coral1"</span>,</span>
<span>                                  <span class="st">"#30638E"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>     vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>     vertex.size <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span> <span class="op">*</span> <span class="fl">0.6</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-27-1.png" width="672"></div>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">cl3</span><span class="op">)</span></span></code></pre></div>
<p>Core/periphery:</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#####################</span></span>
<span><span class="co">## core/periphery: ##</span></span>
<span><span class="co">#####################</span></span>
<span></span>
<span><span class="va">core_peiphery</span> <span class="op">&lt;-</span> <span class="fu">netUtils</span><span class="fu">::</span><span class="fu"><a href="https://schochastics.github.io/netUtils/reference/core_periphery.html">core_periphery</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">$</span><span class="va">core_periphery</span> <span class="op">=</span> <span class="va">core_peiphery</span><span class="op">$</span><span class="va">vec</span></span>
<span></span>
<span></span>
<span><span class="co">## solution preview:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">g_journals</span>,</span>
<span>     vertex.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">$</span><span class="va">core_periphery</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>                           <span class="st">"lightgreen"</span>,</span>
<span>                           <span class="st">"coral1"</span><span class="op">)</span>,</span>
<span>     vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>     vertex.size <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">$</span><span class="va">degree</span> <span class="op">*</span> <span class="fl">0.6</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-28-1.png" width="672"></div>
<p>Table with partitions (core/periphery and communities):</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##############################################</span></span>
<span><span class="co">## table of core/periphery and communities: ##</span></span>
<span><span class="co">##############################################</span></span>
<span></span>
<span><span class="va">journals_positions</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">vertexes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>journal_name <span class="op">=</span> <span class="va">name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">intergraph_id</span>, <span class="op">-</span><span class="va">degree</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## table preview:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">journals_positions</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table" style="color: black; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
journal_name
</th>
<th style="text-align:right;">
cl3
</th>
<th style="text-align:right;">
core_periphery
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
социологические исследования
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
журнал социологии и социальной антропологии
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
научный результат. социология и управление
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
теория и практика общественного развития
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
поиск: политика. обществоведение. искусство. социология. культура
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
социология
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table></div>
<p>Community properties:</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">###############################</span></span>
<span><span class="co">## get community properties: ##</span></span>
<span><span class="co">###############################</span></span>
<span></span>
<span><span class="va">communities</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g_journals</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">vertexes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">intergraph_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>journal_name <span class="op">=</span> <span class="va">name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">vertices</span>, by <span class="op">=</span> <span class="st">"journal_name"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cl3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">cl3</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>                      <span class="st">"west"</span>,</span>
<span>                      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">cl3</span> <span class="op">==</span> <span class="fl">2</span>,</span>
<span>                             <span class="st">"east"</span>,</span>
<span>                             <span class="st">"center"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cl3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_reference_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">mean_n_references2021</span><span class="op">)</span>,</span>
<span>            mean_publications <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total_publications2021</span><span class="op">)</span>,</span>
<span>            mean_citations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total_citations2021</span><span class="op">)</span>,</span>
<span>            </span>
<span>            share_foreigners <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">share_foreigners</span><span class="op">)</span>,</span>
<span>            share_RAS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">share_ras</span><span class="op">)</span>,</span>
<span>            share_moscowites <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">share_moscowite</span><span class="op">)</span></span>
<span>            <span class="co">## more attributes can be calculated here. I include those which are reported among the picture.</span></span>
<span>            <span class="op">)</span></span>
<span></span>
<span><span class="co">## properties' preview:</span></span>
<span><span class="va">communities</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table" style="color: black; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
cl3
</th>
<th style="text-align:right;">
mean_reference_list
</th>
<th style="text-align:right;">
mean_publications
</th>
<th style="text-align:right;">
mean_citations
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
center
</td>
<td style="text-align:right;">
19.84167
</td>
<td style="text-align:right;">
72.66667
</td>
<td style="text-align:right;">
433.8333
</td>
</tr>
<tr>
<td style="text-align:left;">
east
</td>
<td style="text-align:right;">
18.92500
</td>
<td style="text-align:right;">
77.18750
</td>
<td style="text-align:right;">
303.8125
</td>
</tr>
<tr>
<td style="text-align:left;">
west
</td>
<td style="text-align:right;">
35.31923
</td>
<td style="text-align:right;">
44.84615
</td>
<td style="text-align:right;">
352.6154
</td>
</tr>
</tbody>
</table></div>
<p>Network slices, i.e. netwroks where only “strong” ties are retained:</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#######################</span></span>
<span><span class="co">## reduced networks: ##</span></span>
<span><span class="co">#######################</span></span>
<span></span>
<span><span class="co">## Here, you need to run par() and loop together. To get the reduced graphs on the same picture.</span></span>
<span><span class="co">## You may also need to zoom to see them (this is due to RStusio default view properties).</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="va">g_journals</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">&gt;</span> <span class="va">i</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">graph_from_data_frame</a></span><span class="op">(</span>directed <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">31</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asDF.html">asDF</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">vertexes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                 </span>
<span>                 <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">journals_positions</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                             <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>name <span class="op">=</span> <span class="va">journal_name</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                 <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cl_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">cl3</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>                                          <span class="st">"#988F2A"</span>,</span>
<span>                                          <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">cl3</span> <span class="op">==</span> <span class="fl">2</span>,</span>
<span>                                                 <span class="st">"coral1"</span>,</span>
<span>                                                 <span class="st">"#30638E"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">cl_colors</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>     vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>     main <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">"tie strength &gt; "</span>, <span class="va">i</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="inline-figure"><img src="chapter4_files/figure-html/unnamed-chunk-31-1.png" width="672"></div>
<p>Save data to load in Gephi:</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#mode2 %&gt;% </span></span>
<span><span class="co">#  count(journal_name, unified_name) %&gt;%</span></span>
<span><span class="co">#  select(-n) %&gt;% </span></span>
<span><span class="co">#  `colnames&lt;-`(c("Source", "Target")) %&gt;% </span></span>
<span><span class="co">#  write.csv("gephi_edges.csv",</span></span>
<span><span class="co">#            row.names = F)</span></span>
<span></span>
<span><span class="co">#mode2 %&gt;% </span></span>
<span><span class="co">#  count(journal_name) %&gt;% </span></span>
<span><span class="co">#  mutate(type = "journal") %&gt;% </span></span>
<span><span class="co">#  rename(Id = journal_name) %&gt;% </span></span>
<span>  </span>
<span><span class="co">#  bind_rows(mode2 %&gt;% </span></span>
<span><span class="co">#              count(unified_name) %&gt;%</span></span>
<span><span class="co">#              mutate(type = "person") %&gt;% </span></span>
<span><span class="co">#              rename(Id = unified_name)) %&gt;%</span></span>
<span><span class="co">#  select(-n) %&gt;% </span></span>
<span><span class="co">#  mutate(name = Id) %&gt;% </span></span>
<span><span class="co">#  write.csv("gephi_nodes.csv",</span></span>
<span><span class="co">#            row.names = F)</span></span></code></pre></div>
<p>Session info:</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.4.3 (2025-02-28 ucrt)</span></span>
<span><span class="co">#&gt; Platform: x86_64-w64-mingw32/x64</span></span>
<span><span class="co">#&gt; Running under: Windows 10 x64 (build 19045)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt; [1] LC_COLLATE=Russian_Russia.utf8 </span></span>
<span><span class="co">#&gt; [2] LC_CTYPE=Russian_Russia.utf8   </span></span>
<span><span class="co">#&gt; [3] LC_MONETARY=Russian_Russia.utf8</span></span>
<span><span class="co">#&gt; [4] LC_NUMERIC=C                   </span></span>
<span><span class="co">#&gt; [5] LC_TIME=Russian_Russia.utf8    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: Europe/Moscow</span></span>
<span><span class="co">#&gt; tzcode source: internal</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets </span></span>
<span><span class="co">#&gt; [6] methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt;  [1] data.table_1.17.8   factoextra_1.0.7   </span></span>
<span><span class="co">#&gt;  [3] ca_0.71.1           blockmodeling_1.1.8</span></span>
<span><span class="co">#&gt;  [5] kableExtra_1.4.0    ggrepel_0.9.6      </span></span>
<span><span class="co">#&gt;  [7] tnet_3.0.16         survival_3.8-3     </span></span>
<span><span class="co">#&gt;  [9] networkdata_0.2.2   netUtils_0.8.3     </span></span>
<span><span class="co">#&gt; [11] manynet_1.6.1       intergraph_2.0-4   </span></span>
<span><span class="co">#&gt; [13] igraph_2.1.4        lubridate_1.9.4    </span></span>
<span><span class="co">#&gt; [15] forcats_1.0.0       stringr_1.5.1      </span></span>
<span><span class="co">#&gt; [17] dplyr_1.1.4         purrr_1.0.4        </span></span>
<span><span class="co">#&gt; [19] readr_2.1.5         tidyr_1.3.1        </span></span>
<span><span class="co">#&gt; [21] tibble_3.2.1        ggplot2_4.0.0      </span></span>
<span><span class="co">#&gt; [23] tidyverse_2.0.0    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] gtable_0.3.6          xfun_0.51            </span></span>
<span><span class="co">#&gt;  [3] bslib_0.9.0           lattice_0.22-6       </span></span>
<span><span class="co">#&gt;  [5] tzdb_0.5.0            vctrs_0.6.5          </span></span>
<span><span class="co">#&gt;  [7] tools_4.4.3           generics_0.1.4       </span></span>
<span><span class="co">#&gt;  [9] parallel_4.4.3        pkgconfig_2.0.3      </span></span>
<span><span class="co">#&gt; [11] Matrix_1.7-2          RColorBrewer_1.1-3   </span></span>
<span><span class="co">#&gt; [13] S7_0.2.0              lifecycle_1.0.4      </span></span>
<span><span class="co">#&gt; [15] compiler_4.4.3        farver_2.1.2         </span></span>
<span><span class="co">#&gt; [17] codetools_0.2-20      htmltools_0.5.8.1    </span></span>
<span><span class="co">#&gt; [19] sass_0.4.10           yaml_2.3.10          </span></span>
<span><span class="co">#&gt; [21] pillar_1.11.1         jquerylib_0.1.4      </span></span>
<span><span class="co">#&gt; [23] cachem_1.1.0          network_1.19.0       </span></span>
<span><span class="co">#&gt; [25] tidyselect_1.2.1      digest_0.6.37        </span></span>
<span><span class="co">#&gt; [27] stringi_1.8.4         bookdown_0.45        </span></span>
<span><span class="co">#&gt; [29] splines_4.4.3         fastmap_1.2.0        </span></span>
<span><span class="co">#&gt; [31] grid_4.4.3            cli_3.6.4            </span></span>
<span><span class="co">#&gt; [33] magrittr_2.0.3        tidygraph_1.3.1      </span></span>
<span><span class="co">#&gt; [35] withr_3.0.2           scales_1.4.0         </span></span>
<span><span class="co">#&gt; [37] timechange_0.3.0      rmarkdown_2.30       </span></span>
<span><span class="co">#&gt; [39] hms_1.1.3             memoise_2.0.1        </span></span>
<span><span class="co">#&gt; [41] coda_0.19-4.1         evaluate_1.0.5       </span></span>
<span><span class="co">#&gt; [43] knitr_1.50            viridisLite_0.4.2    </span></span>
<span><span class="co">#&gt; [45] rlang_1.1.5           downlit_0.4.4        </span></span>
<span><span class="co">#&gt; [47] Rcpp_1.0.14           glue_1.8.0           </span></span>
<span><span class="co">#&gt; [49] xml2_1.5.0            svglite_2.1.3        </span></span>
<span><span class="co">#&gt; [51] rstudioapi_0.17.1     jsonlite_2.0.0       </span></span>
<span><span class="co">#&gt; [53] R6_2.6.1              statnet.common_4.11.0</span></span>
<span><span class="co">#&gt; [55] systemfonts_1.3.1     fs_1.6.6</span></span></code></pre></div>
</div>
<div id="home-assignment-4" class="section level2 unnumbered">
<h2>
<strong>Home assignment 4</strong><a class="anchor" aria-label="anchor" href="#home-assignment-4"><i class="fas fa-link"></i></a>
</h2>
<p>The goal of this assignment is to analyze the structure and relationships within a two-mode network, understand its properties, and derive meaningful conclusions based on the patterns observed. Choose a dataset you like:</p>
<ul>
<li><p><a href="https://sites.google.com/site/ucinetsoftware/datasets/corporate-interlocks-in-scotland-1904-5" style="color: blue;">Corporate interlocks in Scotland</a>,</p></li>
<li><p><a href="https://sites.google.com/site/ucinetsoftware/datasets/hollywood-film-music" style="color: blue;">Hollywood film music</a>,</p></li>
<li><p>data you find/construct by your own (github, google, etc.)</p></li>
</ul>
<p>Describe the network: who/what are the nodes? Vizualize it the way you prefer (in R or in Gephi, do not forget about different layouts possible). Select the mode of analysis: choose to work with either two-mode network or one-mode projections. In the second scenario, provide vizualizations of both projections. Discuss whether you want to work with one specific projection or not. Do the analysis you consider relevant: compute centrality measures, search for communities, core/periphery, etc.</p>
<p>Format: word/pdf/html. If you construct your document from R, make sure it is formatted nicely (no long outputs printed, etc.)
Deadline - before your next class.</p>

</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="topology-communities.html">3 - topology &amp; communities</a></div>
<div class="next"><a href="available-datasets.html">Available datasets</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#two-mode-networks">4 - two-mode networks</a></li>
<li><a class="nav-link" href="#basic-example">Basic example</a></li>
<li><a class="nav-link" href="#dimensionality-reduction">Dimensionality reduction</a></li>
<li><a class="nav-link" href="#clustering-a-two-mode-network-on-cultural-tastes-and-leisure-activities">Clustering a two-mode network on cultural tastes and leisure activities</a></li>
<li><a class="nav-link" href="#case-study-interlocking-editors-in-russian-sociology">Case study: interlocking editors in Russian sociology</a></li>
<li><a class="nav-link" href="#home-assignment-4">Home assignment 4</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/artpech23/sna-for-hse-master-students2025/blob/master/chapter4.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/artpech23/sna-for-hse-master-students2025/edit/master/chapter4.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>yet another SNA coursebook</strong>" was written by Arthur Pecherskikh. It was last built on 2025-11-25.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
